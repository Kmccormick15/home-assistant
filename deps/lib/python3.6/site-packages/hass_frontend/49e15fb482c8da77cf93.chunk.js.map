{"version":3,"file":"49e15fb482c8da77cf93.chunk.js","sources":["webpack:///49e15fb482c8da77cf93.chunk.js"],"sourcesContent":["(window.webpackJsonp=window.webpackJsonp||[]).push([[43],{192:function(module,__webpack_exports__,__webpack_require__){\"use strict\";__webpack_require__.r(__webpack_exports__);__webpack_require__.d(__webpack_exports__,\"default\",function(){return ExternalAuth});var home_assistant_js_websocket__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(21);const CALLBACK_SET_TOKEN=\"externalAuthSetToken\",CALLBACK_REVOKE_TOKEN=\"externalAuthRevokeToken\";if(!window.externalApp&&!window.webkit){throw new Error(\"External auth requires either externalApp or webkit defined on Window object.\")}class ExternalAuth extends home_assistant_js_websocket__WEBPACK_IMPORTED_MODULE_0__.a{constructor(hassUrl){super();this.data={hassUrl,access_token:\"\",expires:0}}async refreshAccessToken(){const responseProm=new Promise((resolve,reject)=>{window[CALLBACK_SET_TOKEN]=(success,data)=>success?resolve(data):reject(data)});await 0;const callbackPayload={callback:CALLBACK_SET_TOKEN};if(window.externalApp){window.externalApp.getExternalAuth(callbackPayload)}else{window.webkit.messageHandlers.getExternalAuth.postMessage(callbackPayload)}const tokens=await responseProm;this.data.access_token=tokens.access_token;this.data.expires=1e3*tokens.expires_in+Date.now()}async revoke(){const responseProm=new Promise((resolve,reject)=>{window[CALLBACK_REVOKE_TOKEN]=(success,data)=>success?resolve(data):reject(data)});await 0;const callbackPayload={callback:CALLBACK_REVOKE_TOKEN};if(window.externalApp){window.externalApp.revokeExternalAuth(callbackPayload)}else{window.webkit.messageHandlers.revokeExternalAuth.postMessage(callbackPayload)}await responseProm}}}}]);"],"mappings":"AAAA","sourceRoot":""}