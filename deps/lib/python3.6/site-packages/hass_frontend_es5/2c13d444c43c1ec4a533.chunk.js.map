{"version":3,"file":"2c13d444c43c1ec4a533.chunk.js","sources":["webpack:///2c13d444c43c1ec4a533.chunk.js"],"sourcesContent":["(window.webpackJsonp=window.webpackJsonp||[]).push([[35],{658:function(module,__webpack_exports__,__webpack_require__){\"use strict\";__webpack_require__.r(__webpack_exports__);var app_header_layout=__webpack_require__(155),app_header=__webpack_require__(154),app_toolbar=__webpack_require__(122),paper_listbox=__webpack_require__(123),paper_card=__webpack_require__(153),paper_checkbox=__webpack_require__(156),paper_item=__webpack_require__(120),html_tag=__webpack_require__(0),polymer_element=__webpack_require__(4),moment=__webpack_require__(336),moment_default=__webpack_require__.n(moment),dates=__webpack_require__(202),dates_default=__webpack_require__.n(dates),ha_menu_button=__webpack_require__(135),ha_style=__webpack_require__(121),preact_compat_es=__webpack_require__(194),lib=__webpack_require__(451),lib_default=__webpack_require__.n(lib),events_mixin=__webpack_require__(14),_createClass=function(){function defineProperties(target,props){for(var i=0,descriptor;i<props.length;i++){descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1;descriptor.configurable=!0;if(\"value\"in descriptor)descriptor.writable=!0;Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){if(protoProps)defineProperties(Constructor.prototype,protoProps);if(staticProps)defineProperties(Constructor,staticProps);return Constructor}}(),_templateObject=function(strings,raw){return Object.freeze(Object.defineProperties(strings,{raw:{value:Object.freeze(raw)}}))}([\"\\n      <link rel=\\\"stylesheet\\\" href=\\\"/static/panels/calendar/react-big-calendar.css\\\">\\n      <style>\\n        div#root {\\n          height: 100%;\\n          width: 100%;\\n        }\\n      </style>\\n      <div id=\\\"root\\\"></div>\"],[\"\\n      <link rel=\\\"stylesheet\\\" href=\\\"/static/panels/calendar/react-big-calendar.css\\\">\\n      <style>\\n        div#root {\\n          height: 100%;\\n          width: 100%;\\n        }\\n      </style>\\n      <div id=\\\"root\\\"></div>\"]);function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError(\"Cannot call a class as a function\")}}function _possibleConstructorReturn(self,call){if(!self){throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\")}return call&&(\"object\"===typeof call||\"function\"===typeof call)?call:self}function _inherits(subClass,superClass){if(\"function\"!==typeof superClass&&null!==superClass){throw new TypeError(\"Super expression must either be null or a function, not \"+typeof superClass)}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:!1,writable:!0,configurable:!0}});if(superClass)Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass}lib_default.a.setLocalizer(lib_default.a.momentLocalizer(moment_default.a));var ha_big_calendar_HaBigCalendar=function(_EventsMixin){_inherits(HaBigCalendar,_EventsMixin);function HaBigCalendar(){_classCallCheck(this,HaBigCalendar);return _possibleConstructorReturn(this,(HaBigCalendar.__proto__||Object.getPrototypeOf(HaBigCalendar)).apply(this,arguments))}_createClass(HaBigCalendar,[{key:\"_update\",value:function(events){var _this2=this,allViews=lib_default.a.Views.values,BCElement=preact_compat_es[\"default\"].createElement(lib_default.a,{events:events,views:allViews,popup:!0,onNavigate:function(date,viewName){return _this2.fire(\"navigate\",{date:date,viewName:viewName})},onView:function(viewName){return _this2.fire(\"view-changed\",{viewName:viewName})},eventPropGetter:this._setEventStyle,defaultView:\"month\",defaultDate:new Date});Object(preact_compat_es.render)(BCElement,this.$.root)}},{key:\"_setEventStyle\",value:function(event){var newStyle={};if(event.color){newStyle.backgroundColor=event.color}return{style:newStyle}}}],[{key:\"template\",get:function(){return Object(html_tag.a)(_templateObject)}},{key:\"properties\",get:function(){return{events:{type:Array,observer:\"_update\"}}}}]);return HaBigCalendar}(Object(events_mixin.a)(polymer_element.a));customElements.define(\"ha-big-calendar\",ha_big_calendar_HaBigCalendar);var localize_mixin=__webpack_require__(13),ha_panel_calendar_createClass=function(){function defineProperties(target,props){for(var i=0,descriptor;i<props.length;i++){descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1;descriptor.configurable=!0;if(\"value\"in descriptor)descriptor.writable=!0;Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){if(protoProps)defineProperties(Constructor.prototype,protoProps);if(staticProps)defineProperties(Constructor,staticProps);return Constructor}}(),_get=function get(object,property,receiver){if(null===object)object=Function.prototype;var desc=Object.getOwnPropertyDescriptor(object,property);if(desc===void 0){var parent=Object.getPrototypeOf(object);if(null===parent){}else{return get(parent,property,receiver)}}else if(\"value\"in desc){return desc.value}else{var getter=desc.get;if(getter===void 0){return}return getter.call(receiver)}},ha_panel_calendar_templateObject=function(strings,raw){return Object.freeze(Object.defineProperties(strings,{raw:{value:Object.freeze(raw)}}))}([\"\\n      <style include=\\\"iron-flex ha-style\\\">\\n        .content {\\n          padding: 16px;\\n          @apply --layout-horizontal;\\n        }\\n\\n        ha-big-calendar {\\n          min-height: 500px;\\n          min-width: 100%;\\n        }\\n\\n        #calendars {\\n          padding-right: 16px;\\n          width: 15%;\\n          min-width: 170px;\\n        }\\n\\n        paper-item {\\n          cursor: pointer;\\n        }\\n\\n        div.all_calendars {\\n    \\uFFFC     height: 20px;\\n    \\uFFFC     text-align: center;\\n        }\\n\\n        .iron-selected {\\n          background-color: #e5e5e5;\\n          font-weight: normal;\\n        }\\n\\n        :host([narrow]) .content {\\n          flex-direction: column;\\n        }\\n        :host([narrow]) #calendars {\\n          margin-bottom: 24px;\\n          width: 100%;\\n        }\\n      </style>\\n\\n      <app-header-layout has-scrolling-region>\\n        <app-header slot=\\\"header\\\" fixed>\\n          <app-toolbar>\\n            <ha-menu-button narrow='[[narrow]]' show-menu='[[showMenu]]'></ha-menu-button>\\n            <div main-title>[[localize('panel.calendar')]]</div>\\n          </app-toolbar>\\n        </app-header>\\n\\n        <div class=\\\"flex content\\\">\\n          <div id=\\\"calendars\\\" class=\\\"layout vertical wrap\\\">\\n            <paper-card heading=\\\"Calendars\\\">\\n              <paper-listbox\\n                id=\\\"calendar_list\\\"\\n                multi\\n                on-selected-items-changed=\\\"_fetchData\\\"\\n                selected-values=\\\"{{selectedCalendars}}\\\"\\n                attr-for-selected=\\\"item-name\\\"\\n              >\\n                <template is=\\\"dom-repeat\\\" items=\\\"[[calendars]]\\\">\\n                  <paper-item item-name=\\\"[[item.entity_id]]\\\">\\n                    <span class=\\\"calendar_color\\\" style$=\\\"background-color: [[item.color]]\\\"></span>\\n                    <span class=\\\"calendar_color_spacer\\\"></span>\\n                    [[item.name]]\\n                  </paper-item>\\n                </template>\\n              </paper-listbox>\\n            </paper-card>\\n          </div>\\n          <div class=\\\"flex layout horizontal wrap\\\">\\n            <ha-big-calendar\\n              default-date=\\\"[[currentDate]]\\\"\\n              default-view=\\\"[[currentView]]\\\"\\n              on-navigate='_handleNavigate'\\n              on-view='_handleViewChanged'\\n              events=\\\"[[events]]\\\">\\n            </ha-big-calendar>\\n          </div>\\n        </div>\\n      </app-header-layout>\"],[\"\\n      <style include=\\\"iron-flex ha-style\\\">\\n        .content {\\n          padding: 16px;\\n          @apply --layout-horizontal;\\n        }\\n\\n        ha-big-calendar {\\n          min-height: 500px;\\n          min-width: 100%;\\n        }\\n\\n        #calendars {\\n          padding-right: 16px;\\n          width: 15%;\\n          min-width: 170px;\\n        }\\n\\n        paper-item {\\n          cursor: pointer;\\n        }\\n\\n        div.all_calendars {\\n    \\uFFFC     height: 20px;\\n    \\uFFFC     text-align: center;\\n        }\\n\\n        .iron-selected {\\n          background-color: #e5e5e5;\\n          font-weight: normal;\\n        }\\n\\n        :host([narrow]) .content {\\n          flex-direction: column;\\n        }\\n        :host([narrow]) #calendars {\\n          margin-bottom: 24px;\\n          width: 100%;\\n        }\\n      </style>\\n\\n      <app-header-layout has-scrolling-region>\\n        <app-header slot=\\\"header\\\" fixed>\\n          <app-toolbar>\\n            <ha-menu-button narrow='[[narrow]]' show-menu='[[showMenu]]'></ha-menu-button>\\n            <div main-title>[[localize('panel.calendar')]]</div>\\n          </app-toolbar>\\n        </app-header>\\n\\n        <div class=\\\"flex content\\\">\\n          <div id=\\\"calendars\\\" class=\\\"layout vertical wrap\\\">\\n            <paper-card heading=\\\"Calendars\\\">\\n              <paper-listbox\\n                id=\\\"calendar_list\\\"\\n                multi\\n                on-selected-items-changed=\\\"_fetchData\\\"\\n                selected-values=\\\"{{selectedCalendars}}\\\"\\n                attr-for-selected=\\\"item-name\\\"\\n              >\\n                <template is=\\\"dom-repeat\\\" items=\\\"[[calendars]]\\\">\\n                  <paper-item item-name=\\\"[[item.entity_id]]\\\">\\n                    <span class=\\\"calendar_color\\\" style$=\\\"background-color: [[item.color]]\\\"></span>\\n                    <span class=\\\"calendar_color_spacer\\\"></span>\\n                    [[item.name]]\\n                  </paper-item>\\n                </template>\\n              </paper-listbox>\\n            </paper-card>\\n          </div>\\n          <div class=\\\"flex layout horizontal wrap\\\">\\n            <ha-big-calendar\\n              default-date=\\\"[[currentDate]]\\\"\\n              default-view=\\\"[[currentView]]\\\"\\n              on-navigate='_handleNavigate'\\n              on-view='_handleViewChanged'\\n              events=\\\"[[events]]\\\">\\n            </ha-big-calendar>\\n          </div>\\n        </div>\\n      </app-header-layout>\"]);function ha_panel_calendar_classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError(\"Cannot call a class as a function\")}}function ha_panel_calendar_possibleConstructorReturn(self,call){if(!self){throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\")}return call&&(\"object\"===typeof call||\"function\"===typeof call)?call:self}function ha_panel_calendar_inherits(subClass,superClass){if(\"function\"!==typeof superClass&&null!==superClass){throw new TypeError(\"Super expression must either be null or a function, not \"+typeof superClass)}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:!1,writable:!0,configurable:!0}});if(superClass)Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass}var ha_panel_calendar_HaPanelCalendar=function(_LocalizeMixin){ha_panel_calendar_inherits(HaPanelCalendar,_LocalizeMixin);function HaPanelCalendar(){ha_panel_calendar_classCallCheck(this,HaPanelCalendar);return ha_panel_calendar_possibleConstructorReturn(this,(HaPanelCalendar.__proto__||Object.getPrototypeOf(HaPanelCalendar)).apply(this,arguments))}ha_panel_calendar_createClass(HaPanelCalendar,[{key:\"connectedCallback\",value:function(){_get(HaPanelCalendar.prototype.__proto__||Object.getPrototypeOf(HaPanelCalendar.prototype),\"connectedCallback\",this).call(this);this._fetchCalendars()}},{key:\"_fetchCalendars\",value:function(){var _this2=this;this.hass.callApi(\"get\",\"calendars\").then(function(result){_this2.calendars=result;_this2.selectedCalendars=result.map(function(cal){return cal.entity_id})})}},{key:\"_fetchData\",value:function(){var _this3=this,start=dates_default.a.firstVisibleDay(this.currentDate).toISOString(),end=dates_default.a.lastVisibleDay(this.currentDate).toISOString(),params=encodeURI(\"?start=\"+start+\"&end=\"+end),calls=this.selectedCalendars.map(function(cal){return _this3.hass.callApi(\"get\",\"calendars/\"+cal+params)});Promise.all(calls).then(function(results){var tmpEvents=[];results.forEach(function(res){res.forEach(function(ev){ev.start=new Date(ev.start);if(ev.end){ev.end=new Date(ev.end)}else{ev.end=null}tmpEvents.push(ev)})});_this3.events=tmpEvents})}},{key:\"_getDateRange\",value:function(){var startDate=void 0,endDate=void 0;if(\"day\"===this.currentView){startDate=moment_default()(this.currentDate).startOf(\"day\");endDate=moment_default()(this.currentDate).startOf(\"day\")}else if(\"week\"===this.currentView){startDate=moment_default()(this.currentDate).startOf(\"isoWeek\");endDate=moment_default()(this.currentDate).endOf(\"isoWeek\")}else if(\"month\"===this.currentView){startDate=moment_default()(this.currentDate).startOf(\"month\").subtract(7,\"days\");endDate=moment_default()(this.currentDate).endOf(\"month\").add(7,\"days\")}else if(\"agenda\"===this.currentView){startDate=moment_default()(this.currentDate).startOf(\"day\");endDate=moment_default()(this.currentDate).endOf(\"day\").add(1,\"month\")}return[startDate.toISOString(),endDate.toISOString()]}},{key:\"_handleViewChanged\",value:function(ev){this.currentView=ev.detail.viewName;this._fetchData()}},{key:\"_handleNavigate\",value:function(ev){this.currentDate=ev.detail.date;this.currentView=ev.detail.viewName;this._fetchData()}}],[{key:\"template\",get:function(){return Object(html_tag.a)(ha_panel_calendar_templateObject)}},{key:\"properties\",get:function(){return{hass:Object,currentView:{type:String,value:\"month\"},currentDate:{type:Object,value:new Date},events:{type:Array,value:[]},calendars:{type:Array,value:[]},selectedCalendars:{type:Array,value:[]},narrow:{type:Boolean,reflectToAttribute:!0},showMenu:{type:Boolean,value:!1}}}}]);return HaPanelCalendar}(Object(localize_mixin.a)(polymer_element.a));customElements.define(\"ha-panel-calendar\",ha_panel_calendar_HaPanelCalendar)}}]);"],"mappings":"AAAA","sourceRoot":""}