{"version":3,"file":"65840b9e95a50431ecfb.chunk.js","sources":["webpack:///65840b9e95a50431ecfb.chunk.js"],"sourcesContent":["(window.webpackJsonp=window.webpackJsonp||[]).push([[59],{201:function(module,__webpack_exports__,__webpack_require__){\"use strict\";__webpack_require__.d(__webpack_exports__,\"b\",function(){return PaperDialogBehaviorImpl});__webpack_require__.d(__webpack_exports__,\"a\",function(){return PaperDialogBehavior});var _polymer_polymer_polymer_legacy_js__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(2),_polymer_iron_overlay_behavior_iron_overlay_behavior_js__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(54),_polymer_polymer_lib_legacy_polymer_dom_js__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(1),PaperDialogBehaviorImpl={hostAttributes:{role:\"dialog\",tabindex:\"-1\"},properties:{modal:{type:Boolean,value:!1},__readied:{type:Boolean,value:!1}},observers:[\"_modalChanged(modal, __readied)\"],listeners:{tap:\"_onDialogClick\"},ready:function(){this.__prevNoCancelOnOutsideClick=this.noCancelOnOutsideClick;this.__prevNoCancelOnEscKey=this.noCancelOnEscKey;this.__prevWithBackdrop=this.withBackdrop;this.__readied=!0},_modalChanged:function(modal,readied){if(!readied){return}if(modal){this.__prevNoCancelOnOutsideClick=this.noCancelOnOutsideClick;this.__prevNoCancelOnEscKey=this.noCancelOnEscKey;this.__prevWithBackdrop=this.withBackdrop;this.noCancelOnOutsideClick=!0;this.noCancelOnEscKey=!0;this.withBackdrop=!0}else{this.noCancelOnOutsideClick=this.noCancelOnOutsideClick&&this.__prevNoCancelOnOutsideClick;this.noCancelOnEscKey=this.noCancelOnEscKey&&this.__prevNoCancelOnEscKey;this.withBackdrop=this.withBackdrop&&this.__prevWithBackdrop}},_updateClosingReasonConfirmed:function(confirmed){this.closingReason=this.closingReason||{};this.closingReason.confirmed=confirmed},_onDialogClick:function(event){for(var path=Object(_polymer_polymer_lib_legacy_polymer_dom_js__WEBPACK_IMPORTED_MODULE_2__.b)(event).path,i=0,l=path.indexOf(this),target;i<l;i++){target=path[i];if(target.hasAttribute&&(target.hasAttribute(\"dialog-dismiss\")||target.hasAttribute(\"dialog-confirm\"))){this._updateClosingReasonConfirmed(target.hasAttribute(\"dialog-confirm\"));this.close();event.stopPropagation();break}}}},PaperDialogBehavior=[_polymer_iron_overlay_behavior_iron_overlay_behavior_js__WEBPACK_IMPORTED_MODULE_1__.a,PaperDialogBehaviorImpl];/**\n@license\nCopyright (c) 2015 The Polymer Project Authors. All rights reserved.\nThis code may only be used under the BSD style license found at\nhttp://polymer.github.io/LICENSE.txt The complete set of authors may be found at\nhttp://polymer.github.io/AUTHORS.txt The complete set of contributors may be\nfound at http://polymer.github.io/CONTRIBUTORS.txt Code distributed by Google as\npart of the polymer project is also subject to an additional IP rights grant\nfound at http://polymer.github.io/PATENTS.txt\n*/},206:function(module,__webpack_exports__,__webpack_require__){\"use strict\";var _polymer_polymer_polymer_legacy_js__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(2),_polymer_iron_flex_layout_iron_flex_layout_js__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(26),_polymer_paper_styles_default_theme_js__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(30),_polymer_paper_styles_typography_js__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__(43),_polymer_paper_styles_shadow_js__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__(63),$_documentContainer=document.createElement(\"template\");/**\n@license\nCopyright (c) 2015 The Polymer Project Authors. All rights reserved.\nThis code may only be used under the BSD style license found at\nhttp://polymer.github.io/LICENSE.txt The complete set of authors may be found at\nhttp://polymer.github.io/AUTHORS.txt The complete set of contributors may be\nfound at http://polymer.github.io/CONTRIBUTORS.txt Code distributed by Google as\npart of the polymer project is also subject to an additional IP rights grant\nfound at http://polymer.github.io/PATENTS.txt\n*/$_documentContainer.setAttribute(\"style\",\"display: none;\");$_documentContainer.innerHTML=\"<dom-module id=\\\"paper-dialog-shared-styles\\\">\\n  <template>\\n    <style>\\n      :host {\\n        display: block;\\n        margin: 24px 40px;\\n\\n        background: var(--paper-dialog-background-color, var(--primary-background-color));\\n        color: var(--paper-dialog-color, var(--primary-text-color));\\n\\n        @apply --paper-font-body1;\\n        @apply --shadow-elevation-16dp;\\n        @apply --paper-dialog;\\n      }\\n\\n      :host > ::slotted(*) {\\n        margin-top: 20px;\\n        padding: 0 24px;\\n      }\\n\\n      :host > ::slotted(.no-padding) {\\n        padding: 0;\\n      }\\n\\n      \\n      :host > ::slotted(*:first-child) {\\n        margin-top: 24px;\\n      }\\n\\n      :host > ::slotted(*:last-child) {\\n        margin-bottom: 24px;\\n      }\\n\\n      /* In 1.x, this selector was `:host > ::content h2`. In 2.x <slot> allows\\n      to select direct children only, which increases the weight of this\\n      selector, so we have to re-define first-child/last-child margins below. */\\n      :host > ::slotted(h2) {\\n        position: relative;\\n        margin: 0;\\n\\n        @apply --paper-font-title;\\n        @apply --paper-dialog-title;\\n      }\\n\\n      /* Apply mixin again, in case it sets margin-top. */\\n      :host > ::slotted(h2:first-child) {\\n        margin-top: 24px;\\n        @apply --paper-dialog-title;\\n      }\\n\\n      /* Apply mixin again, in case it sets margin-bottom. */\\n      :host > ::slotted(h2:last-child) {\\n        margin-bottom: 24px;\\n        @apply --paper-dialog-title;\\n      }\\n\\n      :host > ::slotted(.paper-dialog-buttons),\\n      :host > ::slotted(.buttons) {\\n        position: relative;\\n        padding: 8px 8px 8px 24px;\\n        margin: 0;\\n\\n        color: var(--paper-dialog-button-color, var(--primary-color));\\n\\n        @apply --layout-horizontal;\\n        @apply --layout-end-justified;\\n      }\\n    </style>\\n  </template>\\n</dom-module>\";document.head.appendChild($_documentContainer.content)},211:function(module,__webpack_exports__,__webpack_require__){\"use strict\";var _polymer_polymer_polymer_legacy_js__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(2),_polymer_paper_dialog_behavior_paper_dialog_shared_styles_js__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(206),_polymer_neon_animation_neon_animation_runner_behavior_js__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(96),_polymer_paper_dialog_behavior_paper_dialog_behavior_js__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__(201),_polymer_polymer_lib_legacy_polymer_fn_js__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__(3),_polymer_polymer_lib_utils_html_tag_js__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__(0),_templateObject=function(strings,raw){return Object.freeze(Object.defineProperties(strings,{raw:{value:Object.freeze(raw)}}))}/**\n@license\nCopyright (c) 2015 The Polymer Project Authors. All rights reserved.\nThis code may only be used under the BSD style license found at\nhttp://polymer.github.io/LICENSE.txt The complete set of authors may be found at\nhttp://polymer.github.io/AUTHORS.txt The complete set of contributors may be\nfound at http://polymer.github.io/CONTRIBUTORS.txt Code distributed by Google as\npart of the polymer project is also subject to an additional IP rights grant\nfound at http://polymer.github.io/PATENTS.txt\n*/([\"\\n    <style include=\\\"paper-dialog-shared-styles\\\"></style>\\n    <slot></slot>\\n\"],[\"\\n    <style include=\\\"paper-dialog-shared-styles\\\"></style>\\n    <slot></slot>\\n\"]);Object(_polymer_polymer_lib_legacy_polymer_fn_js__WEBPACK_IMPORTED_MODULE_4__.a)({_template:Object(_polymer_polymer_lib_utils_html_tag_js__WEBPACK_IMPORTED_MODULE_5__.a)(_templateObject),is:\"paper-dialog\",behaviors:[_polymer_paper_dialog_behavior_paper_dialog_behavior_js__WEBPACK_IMPORTED_MODULE_3__.a,_polymer_neon_animation_neon_animation_runner_behavior_js__WEBPACK_IMPORTED_MODULE_2__.a],listeners:{\"neon-animation-finish\":\"_onNeonAnimationFinish\"},_renderOpened:function(){this.cancelAnimation();this.playAnimation(\"entry\")},_renderClosed:function(){this.cancelAnimation();this.playAnimation(\"exit\")},_onNeonAnimationFinish:function(){if(this.opened){this._finishRenderOpened()}else{this._finishRenderClosed()}}})},653:function(module,__webpack_exports__,__webpack_require__){\"use strict\";__webpack_require__.r(__webpack_exports__);var _polymer_paper_button_paper_button_js__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(55),_polymer_paper_dialog_paper_dialog_js__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(211),_polymer_paper_spinner_paper_spinner_js__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(125),_polymer_polymer_lib_utils_html_tag_js__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__(0),_polymer_polymer_polymer_element_js__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__(4),_resources_ha_style_js__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__(121),_mixins_localize_mixin_js__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__(13),_createClass=function(){function defineProperties(target,props){for(var i=0,descriptor;i<props.length;i++){descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1;descriptor.configurable=!0;if(\"value\"in descriptor)descriptor.writable=!0;Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){if(protoProps)defineProperties(Constructor.prototype,protoProps);if(staticProps)defineProperties(Constructor,staticProps);return Constructor}}(),_get=function get(object,property,receiver){if(null===object)object=Function.prototype;var desc=Object.getOwnPropertyDescriptor(object,property);if(desc===void 0){var parent=Object.getPrototypeOf(object);if(null===parent){}else{return get(parent,property,receiver)}}else if(\"value\"in desc){return desc.value}else{var getter=desc.get;if(getter===void 0){return}return getter.call(receiver)}},_templateObject=function(strings,raw){return Object.freeze(Object.defineProperties(strings,{raw:{value:Object.freeze(raw)}}))}([\"\\n    <style include=\\\"ha-style-dialog\\\">\\n      .error {\\n        color: red;\\n      }\\n      paper-dialog {\\n        max-width: 500px;\\n      }\\n      .username {\\n        margin-top: -8px;\\n      }\\n    </style>\\n    <paper-dialog id=\\\"dialog\\\" with-backdrop opened=\\\"{{_opened}}\\\" on-opened-changed=\\\"_openedChanged\\\">\\n      <h2>Add user</h2>\\n      <div>\\n        <template is=\\\"dom-if\\\" if=\\\"[[_errorMsg]]\\\">\\n          <div class='error'>[[_errorMsg]]</div>\\n        </template>\\n        <paper-input\\n          class='name'\\n          label='Name'\\n          value='{{_name}}'\\n          required\\n          auto-validate\\n          autocapitalize='on'\\n          error-message='Required'\\n          on-blur='_maybePopulateUsername'\\n        ></paper-input>\\n        <paper-input\\n          class='username'\\n          label='Username'\\n          value='{{_username}}'\\n          required\\n          auto-validate\\n          autocapitalize='none'\\n          error-message='Required'\\n        ></paper-input>\\n        <paper-input\\n          label='Password'\\n          type='password'\\n          value='{{_password}}'\\n          required\\n          auto-validate\\n          error-message='Required'\\n        ></paper-input>\\n      </div>\\n      <div class=\\\"buttons\\\">\\n        <template is=\\\"dom-if\\\" if=\\\"[[_loading]]\\\">\\n          <div class='submit-spinner'><paper-spinner active></paper-spinner></div>\\n        </template>\\n        <template is=\\\"dom-if\\\" if=\\\"[[!_loading]]\\\">\\n          <paper-button on-click=\\\"_createUser\\\">Create</paper-button>\\n        </template>\\n      </div>\\n    </paper-dialog>\\n\"],[\"\\n    <style include=\\\"ha-style-dialog\\\">\\n      .error {\\n        color: red;\\n      }\\n      paper-dialog {\\n        max-width: 500px;\\n      }\\n      .username {\\n        margin-top: -8px;\\n      }\\n    </style>\\n    <paper-dialog id=\\\"dialog\\\" with-backdrop opened=\\\"{{_opened}}\\\" on-opened-changed=\\\"_openedChanged\\\">\\n      <h2>Add user</h2>\\n      <div>\\n        <template is=\\\"dom-if\\\" if=\\\"[[_errorMsg]]\\\">\\n          <div class='error'>[[_errorMsg]]</div>\\n        </template>\\n        <paper-input\\n          class='name'\\n          label='Name'\\n          value='{{_name}}'\\n          required\\n          auto-validate\\n          autocapitalize='on'\\n          error-message='Required'\\n          on-blur='_maybePopulateUsername'\\n        ></paper-input>\\n        <paper-input\\n          class='username'\\n          label='Username'\\n          value='{{_username}}'\\n          required\\n          auto-validate\\n          autocapitalize='none'\\n          error-message='Required'\\n        ></paper-input>\\n        <paper-input\\n          label='Password'\\n          type='password'\\n          value='{{_password}}'\\n          required\\n          auto-validate\\n          error-message='Required'\\n        ></paper-input>\\n      </div>\\n      <div class=\\\"buttons\\\">\\n        <template is=\\\"dom-if\\\" if=\\\"[[_loading]]\\\">\\n          <div class='submit-spinner'><paper-spinner active></paper-spinner></div>\\n        </template>\\n        <template is=\\\"dom-if\\\" if=\\\"[[!_loading]]\\\">\\n          <paper-button on-click=\\\"_createUser\\\">Create</paper-button>\\n        </template>\\n      </div>\\n    </paper-dialog>\\n\"]);function _asyncToGenerator(fn){return function(){var gen=fn.apply(this,arguments);return new Promise(function(resolve,reject){function step(key,arg){try{var info=gen[key](arg),value=info.value}catch(error){reject(error);return}if(info.done){resolve(value)}else{return Promise.resolve(value).then(function(value){step(\"next\",value)},function(err){step(\"throw\",err)})}}return step(\"next\")})}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError(\"Cannot call a class as a function\")}}function _possibleConstructorReturn(self,call){if(!self){throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\")}return call&&(\"object\"===typeof call||\"function\"===typeof call)?call:self}function _inherits(subClass,superClass){if(\"function\"!==typeof superClass&&null!==superClass){throw new TypeError(\"Super expression must either be null or a function, not \"+typeof superClass)}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:!1,writable:!0,configurable:!0}});if(superClass)Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass}var HaDialogAddUser=function(_LocalizeMixin){_inherits(HaDialogAddUser,_LocalizeMixin);function HaDialogAddUser(){_classCallCheck(this,HaDialogAddUser);return _possibleConstructorReturn(this,(HaDialogAddUser.__proto__||Object.getPrototypeOf(HaDialogAddUser)).apply(this,arguments))}_createClass(HaDialogAddUser,[{key:\"ready\",value:function(){var _this2=this;_get(HaDialogAddUser.prototype.__proto__||Object.getPrototypeOf(HaDialogAddUser.prototype),\"ready\",this).call(this);this.addEventListener(\"keypress\",function(ev){if(13===ev.keyCode){_this2._createUser()}})}},{key:\"showDialog\",value:function(_ref){var _this3=this,hass=_ref.hass,dialogClosedCallback=_ref.dialogClosedCallback;this.hass=hass;this._dialogClosedCallback=dialogClosedCallback;this._loading=!1;this._opened=!0;setTimeout(function(){return _this3.shadowRoot.querySelector(\"paper-input\").focus()},0)}},{key:\"_maybePopulateUsername\",value:function(){if(this._username)return;var parts=this._name.split(\" \");if(parts.length){this._username=parts[0].toLowerCase()}}},{key:\"_createUser\",value:function(){var _ref2=_asyncToGenerator(regeneratorRuntime.mark(function _callee(){var userId,userResponse;return regeneratorRuntime.wrap(function(_context){while(1){switch(_context.prev=_context.next){case 0:if(!(!this._name||!this._username||!this._password)){_context.next=2;break}return _context.abrupt(\"return\");case 2:this._loading=!0;this._errorMsg=null;userId=void 0;_context.prev=5;_context.next=8;return this.hass.callWS({type:\"config/auth/create\",name:this._name});case 8:userResponse=_context.sent;userId=userResponse.user.id;_context.next=17;break;case 12:_context.prev=12;_context.t0=_context[\"catch\"](5);this._loading=!1;this._errorMsg=_context.t0.code;return _context.abrupt(\"return\");case 17:_context.prev=17;_context.next=20;return this.hass.callWS({type:\"config/auth_provider/homeassistant/create\",user_id:userId,username:this._username,password:this._password});case 20:_context.next=29;break;case 22:_context.prev=22;_context.t1=_context[\"catch\"](17);this._loading=!1;this._errorMsg=_context.t1.code;_context.next=28;return this.hass.callWS({type:\"config/auth/delete\",user_id:userId});case 28:return _context.abrupt(\"return\");case 29:this._dialogDone(userId);case 30:case\"end\":return _context.stop();}}},_callee,this,[[5,12],[17,22]])}));return function(){return _ref2.apply(this,arguments)}}()},{key:\"_dialogDone\",value:function(userId){this._dialogClosedCallback({userId:userId});this.setProperties({_errorMsg:null,_username:\"\",_password:\"\",_dialogClosedCallback:null,_opened:!1})}},{key:\"_equals\",value:function(a,b){return a===b}},{key:\"_openedChanged\",value:function(ev){if(this._dialogClosedCallback&&!ev.detail.value){this._dialogDone()}}}],[{key:\"template\",get:function(){return Object(_polymer_polymer_lib_utils_html_tag_js__WEBPACK_IMPORTED_MODULE_3__.a)(_templateObject)}},{key:\"properties\",get:function(){return{_hass:Object,_dialogClosedCallback:Function,_loading:{type:Boolean,value:!1},_errorMsg:String,_opened:{type:Boolean,value:!1},_name:String,_username:String,_password:String}}}]);return HaDialogAddUser}(Object(_mixins_localize_mixin_js__WEBPACK_IMPORTED_MODULE_6__.a)(_polymer_polymer_polymer_element_js__WEBPACK_IMPORTED_MODULE_4__.a));customElements.define(\"ha-dialog-add-user\",HaDialogAddUser)}}]);"],"mappings":"AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","sourceRoot":""}