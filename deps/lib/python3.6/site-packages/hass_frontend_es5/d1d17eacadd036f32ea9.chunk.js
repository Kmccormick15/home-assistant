(window.webpackJsonp=window.webpackJsonp||[]).push([[58],{158:function(module,__webpack_exports__,__webpack_require__){"use strict";var _polymer_paper_slider_paper_slider_js__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(131),_createClass=function(){function defineProperties(target,props){for(var i=0,descriptor;i<props.length;i++){descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1;descriptor.configurable=!0;if("value"in descriptor)descriptor.writable=!0;Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){if(protoProps)defineProperties(Constructor.prototype,protoProps);if(staticProps)defineProperties(Constructor,staticProps);return Constructor}}();function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _possibleConstructorReturn(self,call){if(!self){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return call&&("object"===typeof call||"function"===typeof call)?call:self}function _inherits(subClass,superClass){if("function"!==typeof superClass&&null!==superClass){throw new TypeError("Super expression must either be null or a function, not "+typeof superClass)}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:!1,writable:!0,configurable:!0}});if(superClass)Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass}var PaperSliderClass=customElements.get("paper-slider"),HaPaperSlider=function(_PaperSliderClass){_inherits(HaPaperSlider,_PaperSliderClass);function HaPaperSlider(){_classCallCheck(this,HaPaperSlider);return _possibleConstructorReturn(this,(HaPaperSlider.__proto__||Object.getPrototypeOf(HaPaperSlider)).apply(this,arguments))}_createClass(HaPaperSlider,null,[{key:"template",get:function(){var tpl=document.createElement("template");tpl.innerHTML=PaperSliderClass.template.innerHTML;var styleEl=document.createElement("style");styleEl.innerHTML="\n      .pin > .slider-knob > .slider-knob-inner {\n        font-size:  var(--ha-paper-slider-pin-font-size, 10px);\n        line-height: normal;\n      }\n\n      .pin > .slider-knob > .slider-knob-inner::before {\n        top: unset;\n        margin-left: unset;\n\n        bottom: calc(15px + var(--calculated-paper-slider-height)/2);\n        left: 50%;\n        width: 2.2em;\n        height: 2.2em;\n\n        -webkit-transform-origin: left bottom;\n        transform-origin: left bottom;\n        -webkit-transform: rotate(-45deg) scale(0) translate(0);\n        transform: rotate(-45deg) scale(0) translate(0);\n      }\n\n      .pin.expand > .slider-knob > .slider-knob-inner::before {\n        -webkit-transform: rotate(-45deg) scale(1) translate(7px, -7px);\n        transform: rotate(-45deg) scale(1) translate(7px, -7px);\n      }\n\n      .pin > .slider-knob > .slider-knob-inner::after {\n        top: unset;\n        font-size: unset;\n\n        bottom: calc(15px + var(--calculated-paper-slider-height)/2);\n        left: 50%;\n        margin-left: -1.1em;\n        width: 2.2em;\n        height: 2.1em;\n\n        -webkit-transform-origin: center bottom;\n        transform-origin: center bottom;\n        -webkit-transform: scale(0) translate(0);\n        transform: scale(0) translate(0);\n      }\n\n      .pin.expand > .slider-knob > .slider-knob-inner::after {\n        -webkit-transform: scale(1) translate(0, -10px);\n        transform: scale(1) translate(0, -10px);\n      }\n    ";tpl.content.appendChild(styleEl);return tpl}}]);return HaPaperSlider}(PaperSliderClass);customElements.define("ha-paper-slider",HaPaperSlider)},161:function(module,__webpack_exports__,__webpack_require__){"use strict";var _polymer_paper_checkbox_paper_checkbox_js__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(156),_polymer_paper_dropdown_menu_paper_dropdown_menu_js__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(124),_polymer_paper_icon_button_paper_icon_button_js__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(62),_polymer_paper_input_paper_input_js__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__(61),_polymer_paper_item_paper_item_js__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__(120),_polymer_paper_listbox_paper_listbox_js__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__(123),_polymer_polymer_lib_utils_html_tag_js__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__(0),_polymer_polymer_polymer_element_js__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__(4),_ha_paper_slider_js__WEBPACK_IMPORTED_MODULE_8__=__webpack_require__(158),_mixins_events_mixin_js__WEBPACK_IMPORTED_MODULE_9__=__webpack_require__(14),_createClass=function(){function defineProperties(target,props){for(var i=0,descriptor;i<props.length;i++){descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1;descriptor.configurable=!0;if("value"in descriptor)descriptor.writable=!0;Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){if(protoProps)defineProperties(Constructor.prototype,protoProps);if(staticProps)defineProperties(Constructor,staticProps);return Constructor}}(),_templateObject=function(strings,raw){return Object.freeze(Object.defineProperties(strings,{raw:{value:Object.freeze(raw)}}))}(["\n    <style>\n      .error {\n        color: red;\n      }\n      paper-checkbox {\n        display: inline-block;\n        padding: 22px 0;\n      }\n    </style>\n    <template is=\"dom-if\" if=\"[[_isArray(schema)]]\" restamp=\"\">\n      <template is=\"dom-if\" if=\"[[error.base]]\">\n          <div class='error'>[[computeError(error.base, schema)]]</div>\n      </template>\n\n      <template is=\"dom-repeat\" items=\"[[schema]]\">\n        <ha-form data=\"[[_getValue(data, item)]]\" schema=\"[[item]]\" error=\"[[_getValue(error, item)]]\" on-data-changed=\"_valueChanged\" compute-label=\"[[computeLabel]]\" compute-error=\"[[computeError]]\"></ha-form>\n      </template>\n    </template>\n    <template is=\"dom-if\" if=\"[[!_isArray(schema)]]\" restamp=\"\">\n      <template is=\"dom-if\" if=\"[[error]]\">\n        <div class=\"error\">[[computeError(error, schema)]]</div>\n      </template>\n\n      <template is=\"dom-if\" if=\"[[_equals(schema.type, &quot;string&quot;)]]\" restamp=\"\">\n        <template is=\"dom-if\" if=\"[[_includes(schema.name, &quot;password&quot;)]]\" restamp=\"\">\n          <paper-input\n            type=\"[[_passwordFieldType(unmaskedPassword)]]\"\n            label=\"[[computeLabel(schema)]]\"\n            value=\"{{data}}\"\n            required=\"[[schema.required]]\"\n            auto-validate=\"[[schema.required]]\"\n            error-message='Required'\n          >\n            <paper-icon-button toggles\n              active=\"{{unmaskedPassword}}\"\n              slot=\"suffix\"\n              icon=\"[[_passwordFieldIcon(unmaskedPassword)]]\"\n              id=\"iconButton\"\n              title=\"Click to toggle between masked and clear password\">\n            </paper-icon-button>\n          </paper-input>\n        </template>\n        <template is=\"dom-if\" if=\"[[!_includes(schema.name, &quot;password&quot;)]]\" restamp=\"\">\n          <paper-input\n            label=\"[[computeLabel(schema)]]\"\n            value=\"{{data}}\"\n            required=\"[[schema.required]]\"\n            auto-validate=\"[[schema.required]]\"\n            error-message='Required'\n          ></paper-input>\n        </template>\n      </template>\n\n      <template is=\"dom-if\" if=\"[[_equals(schema.type, &quot;integer&quot;)]]\" restamp=\"\">\n        <template is=\"dom-if\" if=\"[[_isRange(schema)]]\" restamp=\"\">\n          <div>\n            [[computeLabel(schema)]]\n            <ha-paper-slider pin=\"\" value=\"{{data}}\" min=\"[[schema.valueMin]]\" max=\"[[schema.valueMax]]\"></ha-paper-slider>\n          </div>\n        </template>\n        <template is=\"dom-if\" if=\"[[!_isRange(schema)]]\" restamp=\"\">\n          <paper-input\n            label=\"[[computeLabel(schema)]]\"\n            value=\"{{data}}\"\n            type=\"number\"\n            required=\"[[schema.required]]\"\n            auto-validate=\"[[schema.required]]\"\n            error-message='Required'\n          ></paper-input>\n        </template>\n      </template>\n\n      <template is=\"dom-if\" if=\"[[_equals(schema.type, &quot;float&quot;)]]\" restamp=\"\">\n        <!--TODO-->\n        <paper-input\n          label=\"[[computeLabel(schema)]]\"\n          value=\"{{data}}\"\n          required=\"[[schema.required]]\"\n          auto-validate=\"[[schema.required]]\"\n          error-message='Required'\n        ></paper-input>\n      </template>\n\n      <template is=\"dom-if\" if=\"[[_equals(schema.type, &quot;boolean&quot;)]]\" restamp=\"\">\n        <div>\n          <paper-checkbox checked=\"{{data}}\">[[computeLabel(schema)]]</paper-checkbox>\n        </div>\n      </template>\n\n      <template is=\"dom-if\" if=\"[[_equals(schema.type, &quot;select&quot;)]]\" restamp=\"\">\n        <paper-dropdown-menu label=\"[[computeLabel(schema)]]\">\n          <paper-listbox slot=\"dropdown-content\" attr-for-selected=\"item-name\" selected=\"{{data}}\">\n            <template is=\"dom-repeat\" items=\"[[schema.options]]\">\n              <paper-item item-name$=\"[[_optionValue(item)]]\">[[_optionLabel(item)]]</paper-item>\n            </template>\n          </paper-listbox>\n        </paper-dropdown-menu>\n      </template>\n\n    </template>\n"],["\n    <style>\n      .error {\n        color: red;\n      }\n      paper-checkbox {\n        display: inline-block;\n        padding: 22px 0;\n      }\n    </style>\n    <template is=\"dom-if\" if=\"[[_isArray(schema)]]\" restamp=\"\">\n      <template is=\"dom-if\" if=\"[[error.base]]\">\n          <div class='error'>[[computeError(error.base, schema)]]</div>\n      </template>\n\n      <template is=\"dom-repeat\" items=\"[[schema]]\">\n        <ha-form data=\"[[_getValue(data, item)]]\" schema=\"[[item]]\" error=\"[[_getValue(error, item)]]\" on-data-changed=\"_valueChanged\" compute-label=\"[[computeLabel]]\" compute-error=\"[[computeError]]\"></ha-form>\n      </template>\n    </template>\n    <template is=\"dom-if\" if=\"[[!_isArray(schema)]]\" restamp=\"\">\n      <template is=\"dom-if\" if=\"[[error]]\">\n        <div class=\"error\">[[computeError(error, schema)]]</div>\n      </template>\n\n      <template is=\"dom-if\" if=\"[[_equals(schema.type, &quot;string&quot;)]]\" restamp=\"\">\n        <template is=\"dom-if\" if=\"[[_includes(schema.name, &quot;password&quot;)]]\" restamp=\"\">\n          <paper-input\n            type=\"[[_passwordFieldType(unmaskedPassword)]]\"\n            label=\"[[computeLabel(schema)]]\"\n            value=\"{{data}}\"\n            required=\"[[schema.required]]\"\n            auto-validate=\"[[schema.required]]\"\n            error-message='Required'\n          >\n            <paper-icon-button toggles\n              active=\"{{unmaskedPassword}}\"\n              slot=\"suffix\"\n              icon=\"[[_passwordFieldIcon(unmaskedPassword)]]\"\n              id=\"iconButton\"\n              title=\"Click to toggle between masked and clear password\">\n            </paper-icon-button>\n          </paper-input>\n        </template>\n        <template is=\"dom-if\" if=\"[[!_includes(schema.name, &quot;password&quot;)]]\" restamp=\"\">\n          <paper-input\n            label=\"[[computeLabel(schema)]]\"\n            value=\"{{data}}\"\n            required=\"[[schema.required]]\"\n            auto-validate=\"[[schema.required]]\"\n            error-message='Required'\n          ></paper-input>\n        </template>\n      </template>\n\n      <template is=\"dom-if\" if=\"[[_equals(schema.type, &quot;integer&quot;)]]\" restamp=\"\">\n        <template is=\"dom-if\" if=\"[[_isRange(schema)]]\" restamp=\"\">\n          <div>\n            [[computeLabel(schema)]]\n            <ha-paper-slider pin=\"\" value=\"{{data}}\" min=\"[[schema.valueMin]]\" max=\"[[schema.valueMax]]\"></ha-paper-slider>\n          </div>\n        </template>\n        <template is=\"dom-if\" if=\"[[!_isRange(schema)]]\" restamp=\"\">\n          <paper-input\n            label=\"[[computeLabel(schema)]]\"\n            value=\"{{data}}\"\n            type=\"number\"\n            required=\"[[schema.required]]\"\n            auto-validate=\"[[schema.required]]\"\n            error-message='Required'\n          ></paper-input>\n        </template>\n      </template>\n\n      <template is=\"dom-if\" if=\"[[_equals(schema.type, &quot;float&quot;)]]\" restamp=\"\">\n        <!--TODO-->\n        <paper-input\n          label=\"[[computeLabel(schema)]]\"\n          value=\"{{data}}\"\n          required=\"[[schema.required]]\"\n          auto-validate=\"[[schema.required]]\"\n          error-message='Required'\n        ></paper-input>\n      </template>\n\n      <template is=\"dom-if\" if=\"[[_equals(schema.type, &quot;boolean&quot;)]]\" restamp=\"\">\n        <div>\n          <paper-checkbox checked=\"{{data}}\">[[computeLabel(schema)]]</paper-checkbox>\n        </div>\n      </template>\n\n      <template is=\"dom-if\" if=\"[[_equals(schema.type, &quot;select&quot;)]]\" restamp=\"\">\n        <paper-dropdown-menu label=\"[[computeLabel(schema)]]\">\n          <paper-listbox slot=\"dropdown-content\" attr-for-selected=\"item-name\" selected=\"{{data}}\">\n            <template is=\"dom-repeat\" items=\"[[schema.options]]\">\n              <paper-item item-name$=\"[[_optionValue(item)]]\">[[_optionLabel(item)]]</paper-item>\n            </template>\n          </paper-listbox>\n        </paper-dropdown-menu>\n      </template>\n\n    </template>\n"]);function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _possibleConstructorReturn(self,call){if(!self){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return call&&("object"===typeof call||"function"===typeof call)?call:self}function _inherits(subClass,superClass){if("function"!==typeof superClass&&null!==superClass){throw new TypeError("Super expression must either be null or a function, not "+typeof superClass)}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:!1,writable:!0,configurable:!0}});if(superClass)Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass}var HaForm=function(_EventsMixin){_inherits(HaForm,_EventsMixin);function HaForm(){_classCallCheck(this,HaForm);return _possibleConstructorReturn(this,(HaForm.__proto__||Object.getPrototypeOf(HaForm)).apply(this,arguments))}_createClass(HaForm,[{key:"_isArray",value:function(val){return Array.isArray(val)}},{key:"_isRange",value:function(schema){return"valueMin"in schema&&"valueMax"in schema}},{key:"_equals",value:function(a,b){return a===b}},{key:"_includes",value:function(a,b){return 0<=a.indexOf(b)}},{key:"_getValue",value:function(obj,item){if(obj){return obj[item.name]}return null}},{key:"_valueChanged",value:function(ev){this.set(["data",ev.model.item.name],ev.detail.value)}},{key:"_passwordFieldType",value:function(unmaskedPassword){return unmaskedPassword?"text":"password"}},{key:"_passwordFieldIcon",value:function(unmaskedPassword){return unmaskedPassword?"hass:eye-off":"hass:eye"}},{key:"_optionValue",value:function(item){return Array.isArray(item)?item[0]:item}},{key:"_optionLabel",value:function(item){return Array.isArray(item)?item[1]:item}}],[{key:"template",get:function(){return Object(_polymer_polymer_lib_utils_html_tag_js__WEBPACK_IMPORTED_MODULE_6__.a)(_templateObject)}},{key:"properties",get:function(){return{data:{type:Object,notify:!0},schema:Object,error:Object,computeLabel:{type:Function,value:function(){return function(schema){return schema&&schema.name}}},computeError:{type:Function,value:function(){return function(error){return error}}}}}}]);return HaForm}(Object(_mixins_events_mixin_js__WEBPACK_IMPORTED_MODULE_9__.a)(_polymer_polymer_polymer_element_js__WEBPACK_IMPORTED_MODULE_7__.a));customElements.define("ha-form",HaForm)},652:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__);var _polymer_paper_button_paper_button_js__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(55),_polymer_paper_dialog_scrollable_paper_dialog_scrollable_js__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(221),_polymer_paper_dialog_paper_dialog_js__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(211),_polymer_paper_tooltip_paper_tooltip_js__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__(257),_polymer_paper_spinner_paper_spinner_js__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__(125),_polymer_polymer_lib_utils_html_tag_js__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__(0),_polymer_polymer_polymer_element_js__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__(4),_components_ha_form_js__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__(161),_components_ha_markdown_js__WEBPACK_IMPORTED_MODULE_8__=__webpack_require__(127),_resources_ha_style_js__WEBPACK_IMPORTED_MODULE_9__=__webpack_require__(121),_mixins_events_mixin_js__WEBPACK_IMPORTED_MODULE_10__=__webpack_require__(14),_mixins_localize_mixin_js__WEBPACK_IMPORTED_MODULE_11__=__webpack_require__(13),_createClass=function(){function defineProperties(target,props){for(var i=0,descriptor;i<props.length;i++){descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1;descriptor.configurable=!0;if("value"in descriptor)descriptor.writable=!0;Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){if(protoProps)defineProperties(Constructor.prototype,protoProps);if(staticProps)defineProperties(Constructor,staticProps);return Constructor}}(),_get=function get(object,property,receiver){if(null===object)object=Function.prototype;var desc=Object.getOwnPropertyDescriptor(object,property);if(desc===void 0){var parent=Object.getPrototypeOf(object);if(null===parent){}else{return get(parent,property,receiver)}}else if("value"in desc){return desc.value}else{var getter=desc.get;if(getter===void 0){return}return getter.call(receiver)}},_templateObject=function(strings,raw){return Object.freeze(Object.defineProperties(strings,{raw:{value:Object.freeze(raw)}}))}(["\n    <style include=\"ha-style-dialog\">\n      .error {\n        color: red;\n      }\n      paper-dialog {\n        max-width: 500px;\n      }\n      ha-markdown {\n        word-break: break-word;\n      }\n      ha-markdown a {\n        color: var(--primary-color);\n      }\n      ha-markdown img:first-child:last-child {\n        display: block;\n        margin: 0 auto;\n      }\n      .init-spinner {\n        padding: 10px 100px 34px;\n        text-align: center;\n      }\n      .submit-spinner {\n        margin-right: 16px;\n      }\n    </style>\n    <paper-dialog id=\"dialog\" with-backdrop=\"\" opened=\"{{_opened}}\" on-opened-changed=\"_openedChanged\">\n      <h2>\n        <template is=\"dom-if\" if=\"[[_equals(_step.type, 'abort')]]\">\n          Aborted\n        </template>\n        <template is=\"dom-if\" if=\"[[_equals(_step.type, 'create_entry')]]\">\n          Success!\n        </template>\n        <template is=\"dom-if\" if=\"[[_equals(_step.type, 'form')]]\">\n          [[_computeStepTitle(localize, _step)]]\n        </template>\n      </h2>\n      <paper-dialog-scrollable>\n        <template is=\"dom-if\" if=\"[[_errorMsg]]\">\n          <div class='error'>[[_errorMsg]]</div>\n        </template>\n        <template is=\"dom-if\" if=\"[[!_step]]\">\n          <div class='init-spinner'><paper-spinner active></paper-spinner></div>\n        </template>\n        <template is=\"dom-if\" if=\"[[_step]]\">\n          <template is=\"dom-if\" if=\"[[_equals(_step.type, 'create_entry')]]\">\n            <p>Created config for [[_step.title]]</p>\n          </template>\n\n          <template is=\"dom-if\" if=\"[[_computeStepDescription(localize, _step)]]\">\n            <ha-markdown content=\"[[_computeStepDescription(localize, _step)]]\" allow-svg></ha-markdown>\n          </template>\n\n          <template is=\"dom-if\" if=\"[[_equals(_step.type, 'form')]]\">\n            <ha-form\n              data=\"{{_stepData}}\"\n              on-data-changed='_increaseCounter'\n              schema=\"[[_step.data_schema]]\"\n              error=\"[[_step.errors]]\"\n              compute-label=\"[[_computeLabelCallback(localize, _step)]]\"\n              compute-error=\"[[_computeErrorCallback(localize, _step)]]\"\n            ></ha-form>\n          </template>\n        </template>\n      </paper-dialog-scrollable>\n      <div class=\"buttons\">\n        <template is=\"dom-if\" if=\"[[_equals(_step.type, 'abort')]]\">\n          <paper-button on-click=\"_flowDone\">Close</paper-button>\n        </template>\n        <template is=\"dom-if\" if=\"[[_equals(_step.type, 'create_entry')]]\">\n          <paper-button on-click=\"_flowDone\">Close</paper-button>\n        </template>\n        <template is=\"dom-if\" if=\"[[_equals(_step.type, 'form')]]\">\n          <template is=\"dom-if\" if=\"[[_loading]]\">\n            <div class='submit-spinner'><paper-spinner active></paper-spinner></div>\n          </template>\n          <template is=\"dom-if\" if=\"[[!_loading]]\">\n            <div>\n              <paper-button\n                on-click=\"_submitStep\"\n                disabled='[[!_canSubmit]]'\n              >Submit</paper-button>\n              <template is='dom-if' if='[[!_canSubmit]]'>\n                <paper-tooltip position=\"left\">\n                  Not all required fields are filled in.\n                </paper-tooltip>\n              </template>\n            </div>\n          </template>\n        </template>\n      </div>\n    </paper-dialog>\n"],["\n    <style include=\"ha-style-dialog\">\n      .error {\n        color: red;\n      }\n      paper-dialog {\n        max-width: 500px;\n      }\n      ha-markdown {\n        word-break: break-word;\n      }\n      ha-markdown a {\n        color: var(--primary-color);\n      }\n      ha-markdown img:first-child:last-child {\n        display: block;\n        margin: 0 auto;\n      }\n      .init-spinner {\n        padding: 10px 100px 34px;\n        text-align: center;\n      }\n      .submit-spinner {\n        margin-right: 16px;\n      }\n    </style>\n    <paper-dialog id=\"dialog\" with-backdrop=\"\" opened=\"{{_opened}}\" on-opened-changed=\"_openedChanged\">\n      <h2>\n        <template is=\"dom-if\" if=\"[[_equals(_step.type, 'abort')]]\">\n          Aborted\n        </template>\n        <template is=\"dom-if\" if=\"[[_equals(_step.type, 'create_entry')]]\">\n          Success!\n        </template>\n        <template is=\"dom-if\" if=\"[[_equals(_step.type, 'form')]]\">\n          [[_computeStepTitle(localize, _step)]]\n        </template>\n      </h2>\n      <paper-dialog-scrollable>\n        <template is=\"dom-if\" if=\"[[_errorMsg]]\">\n          <div class='error'>[[_errorMsg]]</div>\n        </template>\n        <template is=\"dom-if\" if=\"[[!_step]]\">\n          <div class='init-spinner'><paper-spinner active></paper-spinner></div>\n        </template>\n        <template is=\"dom-if\" if=\"[[_step]]\">\n          <template is=\"dom-if\" if=\"[[_equals(_step.type, 'create_entry')]]\">\n            <p>Created config for [[_step.title]]</p>\n          </template>\n\n          <template is=\"dom-if\" if=\"[[_computeStepDescription(localize, _step)]]\">\n            <ha-markdown content=\"[[_computeStepDescription(localize, _step)]]\" allow-svg></ha-markdown>\n          </template>\n\n          <template is=\"dom-if\" if=\"[[_equals(_step.type, 'form')]]\">\n            <ha-form\n              data=\"{{_stepData}}\"\n              on-data-changed='_increaseCounter'\n              schema=\"[[_step.data_schema]]\"\n              error=\"[[_step.errors]]\"\n              compute-label=\"[[_computeLabelCallback(localize, _step)]]\"\n              compute-error=\"[[_computeErrorCallback(localize, _step)]]\"\n            ></ha-form>\n          </template>\n        </template>\n      </paper-dialog-scrollable>\n      <div class=\"buttons\">\n        <template is=\"dom-if\" if=\"[[_equals(_step.type, 'abort')]]\">\n          <paper-button on-click=\"_flowDone\">Close</paper-button>\n        </template>\n        <template is=\"dom-if\" if=\"[[_equals(_step.type, 'create_entry')]]\">\n          <paper-button on-click=\"_flowDone\">Close</paper-button>\n        </template>\n        <template is=\"dom-if\" if=\"[[_equals(_step.type, 'form')]]\">\n          <template is=\"dom-if\" if=\"[[_loading]]\">\n            <div class='submit-spinner'><paper-spinner active></paper-spinner></div>\n          </template>\n          <template is=\"dom-if\" if=\"[[!_loading]]\">\n            <div>\n              <paper-button\n                on-click=\"_submitStep\"\n                disabled='[[!_canSubmit]]'\n              >Submit</paper-button>\n              <template is='dom-if' if='[[!_canSubmit]]'>\n                <paper-tooltip position=\"left\">\n                  Not all required fields are filled in.\n                </paper-tooltip>\n              </template>\n            </div>\n          </template>\n        </template>\n      </div>\n    </paper-dialog>\n"]);function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _possibleConstructorReturn(self,call){if(!self){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return call&&("object"===typeof call||"function"===typeof call)?call:self}function _inherits(subClass,superClass){if("function"!==typeof superClass&&null!==superClass){throw new TypeError("Super expression must either be null or a function, not "+typeof superClass)}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:!1,writable:!0,configurable:!0}});if(superClass)Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass}var instance=0,HaConfigFlow=function(_LocalizeMixin){_inherits(HaConfigFlow,_LocalizeMixin);function HaConfigFlow(){_classCallCheck(this,HaConfigFlow);return _possibleConstructorReturn(this,(HaConfigFlow.__proto__||Object.getPrototypeOf(HaConfigFlow)).apply(this,arguments))}_createClass(HaConfigFlow,[{key:"ready",value:function(){var _this2=this;_get(HaConfigFlow.prototype.__proto__||Object.getPrototypeOf(HaConfigFlow.prototype),"ready",this).call(this);this.addEventListener("keypress",function(ev){if(13===ev.keyCode){_this2._submitStep()}})}},{key:"showDialog",value:function(_ref){var _this3=this,hass=_ref.hass,continueFlowId=_ref.continueFlowId,newFlowForHandler=_ref.newFlowForHandler,dialogClosedCallback=_ref.dialogClosedCallback;this.hass=hass;this._instance=instance++;this._dialogClosedCallback=dialogClosedCallback;this._createdFromHandler=!!newFlowForHandler;this._loading=!0;this._opened=!0;var fetchStep=continueFlowId?this.hass.callApi("get","config/config_entries/flow/"+continueFlowId):this.hass.callApi("post","config/config_entries/flow",{handler:newFlowForHandler}),curInstance=this._instance;fetchStep.then(function(step){if(curInstance!==_this3._instance)return;_this3._processStep(step);_this3._loading=!1;setTimeout(function(){return _this3.$.dialog.center()},0)})}},{key:"_submitStep",value:function(){var _this4=this;this._loading=!0;this._errorMsg=null;var curInstance=this._instance,data={};Object.keys(this._stepData).forEach(function(key){var value=_this4._stepData[key],isEmpty=[void 0,""].includes(value);if(!isEmpty){data[key]=value}});this.hass.callApi("post","config/config_entries/flow/"+this._step.flow_id,data).then(function(step){if(curInstance!==_this4._instance)return;_this4._processStep(step);_this4._loading=!1},function(err){_this4._errorMsg=err&&err.body&&err.body.message||"Unknown error occurred";_this4._loading=!1})}},{key:"_processStep",value:function(step){if(!step.errors)step.errors={};this._step=step;if("form"===step.type&&0===Object.keys(step.errors).length){var data={};step.data_schema.forEach(function(field){if("default"in field){data[field.name]=field.default}});this._stepData=data}}},{key:"_flowDone",value:function(){this._opened=!1;var flowFinished=this._step&&["success","abort"].includes(this._step.type);if(this._step&&!flowFinished&&this._createdFromHandler){this.hass.callApi("delete","config/config_entries/flow/"+this._step.flow_id)}this._dialogClosedCallback({flowFinished:flowFinished});this._errorMsg=null;this._step=null;this._stepData={};this._dialogClosedCallback=null}},{key:"_equals",value:function(a,b){return a===b}},{key:"_openedChanged",value:function(ev){if(this._step&&!ev.detail.value){this._flowDone()}}},{key:"_computeStepTitle",value:function(localize,step){return localize("component."+step.handler+".config.step."+step.step_id+".title")}},{key:"_computeStepDescription",value:function(localize,step){var args=[];if("form"===step.type){args.push("component."+step.handler+".config.step."+step.step_id+".description")}else if("abort"===step.type){args.push("component."+step.handler+".config.abort."+step.reason)}else if("create_entry"===step.type){args.push("component."+step.handler+".config.create_entry."+(step.description||"default"))}var placeholders=step.description_placeholders||{};Object.keys(placeholders).forEach(function(key){args.push(key);args.push(placeholders[key])});return localize.apply(void 0,args)}},{key:"_computeLabelCallback",value:function(localize,step){return function(schema){return localize("component."+step.handler+".config.step."+step.step_id+".data."+schema.name)}}},{key:"_computeErrorCallback",value:function(localize,step){return function(error){return localize("component."+step.handler+".config.error."+error)}}},{key:"_computeCanSubmit",value:function(step,stepData){return null!==step&&"form"===step.type&&null!==stepData&&step.data_schema.every(function(field){return field.optional||!["",void 0].includes(stepData[field.name])})}},{key:"_increaseCounter",value:function(){this._counter+=1}}],[{key:"template",get:function(){return Object(_polymer_polymer_lib_utils_html_tag_js__WEBPACK_IMPORTED_MODULE_5__.a)(_templateObject)}},{key:"properties",get:function(){return{_hass:Object,_dialogClosedCallback:Function,_instance:Number,_loading:{type:Boolean,value:!1},_errorMsg:String,_canSubmit:{type:Boolean,computed:"_computeCanSubmit(_step, _stepData, _counter)"},_counter:{type:Number,value:0},_opened:{type:Boolean,value:!1},_step:{type:Object,value:null},_stepData:{type:Object,value:null}}}}]);return HaConfigFlow}(Object(_mixins_localize_mixin_js__WEBPACK_IMPORTED_MODULE_11__.a)(Object(_mixins_events_mixin_js__WEBPACK_IMPORTED_MODULE_10__.a)(_polymer_polymer_polymer_element_js__WEBPACK_IMPORTED_MODULE_6__.a)));customElements.define("ha-config-flow",HaConfigFlow)}}]);
//# sourceMappingURL=d1d17eacadd036f32ea9.chunk.js.map