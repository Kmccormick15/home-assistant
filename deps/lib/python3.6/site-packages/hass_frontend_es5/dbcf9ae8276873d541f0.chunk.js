(window.webpackJsonp=window.webpackJsonp||[]).push([[33],{656:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__);var app_header_layout=__webpack_require__(155),app_header=__webpack_require__(154),paper_card=__webpack_require__(153),paper_item_body=__webpack_require__(198),paper_item=__webpack_require__(120),paper_button=__webpack_require__(55),app_toolbar=__webpack_require__(122),html_tag=__webpack_require__(0),polymer_element=__webpack_require__(4),ha_menu_button=__webpack_require__(135),ha_style=__webpack_require__(121),events_mixin=__webpack_require__(14),paper_dialog=__webpack_require__(211),paper_spinner=__webpack_require__(125),_createClass=function(){function defineProperties(target,props){for(var i=0,descriptor;i<props.length;i++){descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1;descriptor.configurable=!0;if("value"in descriptor)descriptor.writable=!0;Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){if(protoProps)defineProperties(Constructor.prototype,protoProps);if(staticProps)defineProperties(Constructor,staticProps);return Constructor}}(),_get=function get(object,property,receiver){if(null===object)object=Function.prototype;var desc=Object.getOwnPropertyDescriptor(object,property);if(desc===void 0){var parent=Object.getPrototypeOf(object);if(null===parent){}else{return get(parent,property,receiver)}}else if("value"in desc){return desc.value}else{var getter=desc.get;if(getter===void 0){return}return getter.call(receiver)}},_templateObject=function(strings,raw){return Object.freeze(Object.defineProperties(strings,{raw:{value:Object.freeze(raw)}}))}(["\n    <style include=\"ha-style\">\n      .error {\n        color: red;\n      }\n      .status {\n        color: var(--primary-color);\n      }\n      .error, .status {\n        position: absolute;\n        top: -4px;\n      }\n      paper-card {\n        display: block;\n      }\n      .currentPassword {\n        margin-top: -4px;\n      }\n    </style>\n    <div>\n      <paper-card heading=\"Change Password\">\n        <div class=\"card-content\">\n          <template is=\"dom-if\" if=\"[[_errorMsg]]\">\n            <div class='error'>[[_errorMsg]]</div>\n          </template>\n          <template is=\"dom-if\" if=\"[[_statusMsg]]\">\n            <div class=\"status\">[[_statusMsg]]</div>\n          </template>\n          <paper-input\n            class='currentPassword'\n            label='Current Password'\n            type='password'\n            value='{{_currentPassword}}'\n            required\n            auto-validate\n            error-message='Required'\n          ></paper-input>\n          <template is='dom-if' if='[[_currentPassword]]'>\n            <paper-input\n              label='New Password'\n              type='password'\n              value='{{_password1}}'\n              required\n              auto-validate\n              error-message='Required'\n            ></paper-input>\n            <paper-input\n              label='Confirm New Password'\n              type='password'\n              value='{{_password2}}'\n              required\n              auto-validate\n              error-message='Required'\n            ></paper-input>\n          </template>\n        </div>\n        <div class=\"card-actions\">\n          <template is=\"dom-if\" if=\"[[_loading]]\">\n            <div><paper-spinner active></paper-spinner></div>\n          </template>\n          <template is=\"dom-if\" if=\"[[!_loading]]\">\n            <paper-button on-click=\"_changePassword\">Submit</paper-button>\n          </template>\n        </div>\n      </paper-card>\n    </div>\n"],["\n    <style include=\"ha-style\">\n      .error {\n        color: red;\n      }\n      .status {\n        color: var(--primary-color);\n      }\n      .error, .status {\n        position: absolute;\n        top: -4px;\n      }\n      paper-card {\n        display: block;\n      }\n      .currentPassword {\n        margin-top: -4px;\n      }\n    </style>\n    <div>\n      <paper-card heading=\"Change Password\">\n        <div class=\"card-content\">\n          <template is=\"dom-if\" if=\"[[_errorMsg]]\">\n            <div class='error'>[[_errorMsg]]</div>\n          </template>\n          <template is=\"dom-if\" if=\"[[_statusMsg]]\">\n            <div class=\"status\">[[_statusMsg]]</div>\n          </template>\n          <paper-input\n            class='currentPassword'\n            label='Current Password'\n            type='password'\n            value='{{_currentPassword}}'\n            required\n            auto-validate\n            error-message='Required'\n          ></paper-input>\n          <template is='dom-if' if='[[_currentPassword]]'>\n            <paper-input\n              label='New Password'\n              type='password'\n              value='{{_password1}}'\n              required\n              auto-validate\n              error-message='Required'\n            ></paper-input>\n            <paper-input\n              label='Confirm New Password'\n              type='password'\n              value='{{_password2}}'\n              required\n              auto-validate\n              error-message='Required'\n            ></paper-input>\n          </template>\n        </div>\n        <div class=\"card-actions\">\n          <template is=\"dom-if\" if=\"[[_loading]]\">\n            <div><paper-spinner active></paper-spinner></div>\n          </template>\n          <template is=\"dom-if\" if=\"[[!_loading]]\">\n            <paper-button on-click=\"_changePassword\">Submit</paper-button>\n          </template>\n        </div>\n      </paper-card>\n    </div>\n"]);function _asyncToGenerator(fn){return function(){var gen=fn.apply(this,arguments);return new Promise(function(resolve,reject){function step(key,arg){try{var info=gen[key](arg),value=info.value}catch(error){reject(error);return}if(info.done){resolve(value)}else{return Promise.resolve(value).then(function(value){step("next",value)},function(err){step("throw",err)})}}return step("next")})}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _possibleConstructorReturn(self,call){if(!self){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return call&&("object"===typeof call||"function"===typeof call)?call:self}function _inherits(subClass,superClass){if("function"!==typeof superClass&&null!==superClass){throw new TypeError("Super expression must either be null or a function, not "+typeof superClass)}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:!1,writable:!0,configurable:!0}});if(superClass)Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass}var ha_change_password_card_HaChangePasswordCard=function(_PolymerElement){_inherits(HaChangePasswordCard,_PolymerElement);function HaChangePasswordCard(){_classCallCheck(this,HaChangePasswordCard);return _possibleConstructorReturn(this,(HaChangePasswordCard.__proto__||Object.getPrototypeOf(HaChangePasswordCard)).apply(this,arguments))}_createClass(HaChangePasswordCard,[{key:"ready",value:function(){var _this2=this;_get(HaChangePasswordCard.prototype.__proto__||Object.getPrototypeOf(HaChangePasswordCard.prototype),"ready",this).call(this);this.addEventListener("keypress",function(ev){_this2._statusMsg=null;if(13===ev.keyCode){_this2._changePassword()}})}},{key:"_changePassword",value:function(){var _ref=_asyncToGenerator(regeneratorRuntime.mark(function _callee(){return regeneratorRuntime.wrap(function(_context){while(1){switch(_context.prev=_context.next){case 0:this._statusMsg=null;if(!(!this._currentPassword||!this._password1||!this._password2)){_context.next=3;break}return _context.abrupt("return");case 3:if(!(this._password1!==this._password2)){_context.next=6;break}this._errorMsg="New password confirmation doesn't match";return _context.abrupt("return");case 6:if(!(this._currentPassword===this._password1)){_context.next=9;break}this._errorMsg="New password must be different than current password";return _context.abrupt("return");case 9:this._loading=!0;this._errorMsg=null;_context.prev=11;_context.next=14;return this.hass.callWS({type:"config/auth_provider/homeassistant/change_password",current_password:this._currentPassword,new_password:this._password1});case 14:this.setProperties({_statusMsg:"Password changed successfully",_currentPassword:null,_password1:null,_password2:null});_context.next=20;break;case 17:_context.prev=17;_context.t0=_context["catch"](11);this._errorMsg=_context.t0.message;case 20:this._loading=!1;case 21:case"end":return _context.stop();}}},_callee,this,[[11,17]])}));return function(){return _ref.apply(this,arguments)}}()}],[{key:"template",get:function(){return Object(html_tag.a)(_templateObject)}},{key:"properties",get:function(){return{hass:Object,_loading:{type:Boolean,value:!1},_statusMsg:String,_errorMsg:String,_currentPassword:String,_password1:String,_password2:String}}}]);return HaChangePasswordCard}(polymer_element.a);customElements.define("ha-change-password-card",ha_change_password_card_HaChangePasswordCard);var localize_mixin=__webpack_require__(13),ha_mfa_modules_card_createClass=function(){function defineProperties(target,props){for(var i=0,descriptor;i<props.length;i++){descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1;descriptor.configurable=!0;if("value"in descriptor)descriptor.writable=!0;Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){if(protoProps)defineProperties(Constructor.prototype,protoProps);if(staticProps)defineProperties(Constructor,staticProps);return Constructor}}(),ha_mfa_modules_card_get=function get(object,property,receiver){if(null===object)object=Function.prototype;var desc=Object.getOwnPropertyDescriptor(object,property);if(desc===void 0){var parent=Object.getPrototypeOf(object);if(null===parent){}else{return get(parent,property,receiver)}}else if("value"in desc){return desc.value}else{var getter=desc.get;if(getter===void 0){return}return getter.call(receiver)}},ha_mfa_modules_card_templateObject=function(strings,raw){return Object.freeze(Object.defineProperties(strings,{raw:{value:Object.freeze(raw)}}))}(["\n    <style include=\"iron-flex ha-style\">\n      .error {\n        color: red;\n      }\n      .status {\n        color: var(--primary-color);\n      }\n      .error, .status {\n        position: absolute;\n        top: -4px;\n      }\n      paper-card {\n        display: block;\n        max-width: 600px;\n        margin: 16px auto;\n      }\n      paper-button {\n        color: var(--primary-color);\n        font-weight: 500;\n        margin-right: -.57em;\n      }\n    </style>\n    <paper-card heading=\"Multi-factor Authentication Modules\">\n      <template is=\"dom-repeat\" items=\"[[mfaModules]]\" as=\"module\">\n        <paper-item>\n          <paper-item-body two-line=\"\">\n            <div>[[module.name]]</div>\n            <div secondary=\"\">[[module.id]]</div>\n          </paper-item-body>\n          <template is=\"dom-if\" if=\"[[module.enabled]]\">\n            <paper-button on-click=\"_disable\">Disable</paper-button>\n          </template>\n          <template is=\"dom-if\" if=\"[[!module.enabled]]\">\n            <paper-button on-click=\"_enable\">Enable</paper-button>\n          </template>\n        </paper-item>\n      </template>\n    </paper-card>\n"],["\n    <style include=\"iron-flex ha-style\">\n      .error {\n        color: red;\n      }\n      .status {\n        color: var(--primary-color);\n      }\n      .error, .status {\n        position: absolute;\n        top: -4px;\n      }\n      paper-card {\n        display: block;\n        max-width: 600px;\n        margin: 16px auto;\n      }\n      paper-button {\n        color: var(--primary-color);\n        font-weight: 500;\n        margin-right: -.57em;\n      }\n    </style>\n    <paper-card heading=\"Multi-factor Authentication Modules\">\n      <template is=\"dom-repeat\" items=\"[[mfaModules]]\" as=\"module\">\n        <paper-item>\n          <paper-item-body two-line=\"\">\n            <div>[[module.name]]</div>\n            <div secondary=\"\">[[module.id]]</div>\n          </paper-item-body>\n          <template is=\"dom-if\" if=\"[[module.enabled]]\">\n            <paper-button on-click=\"_disable\">Disable</paper-button>\n          </template>\n          <template is=\"dom-if\" if=\"[[!module.enabled]]\">\n            <paper-button on-click=\"_enable\">Enable</paper-button>\n          </template>\n        </paper-item>\n      </template>\n    </paper-card>\n"]);function ha_mfa_modules_card_classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function ha_mfa_modules_card_possibleConstructorReturn(self,call){if(!self){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return call&&("object"===typeof call||"function"===typeof call)?call:self}function ha_mfa_modules_card_inherits(subClass,superClass){if("function"!==typeof superClass&&null!==superClass){throw new TypeError("Super expression must either be null or a function, not "+typeof superClass)}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:!1,writable:!0,configurable:!0}});if(superClass)Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass}var registeredDialog=!1,ha_mfa_modules_card_HaMfaModulesCard=function(_EventsMixin){ha_mfa_modules_card_inherits(HaMfaModulesCard,_EventsMixin);function HaMfaModulesCard(){ha_mfa_modules_card_classCallCheck(this,HaMfaModulesCard);return ha_mfa_modules_card_possibleConstructorReturn(this,(HaMfaModulesCard.__proto__||Object.getPrototypeOf(HaMfaModulesCard)).apply(this,arguments))}ha_mfa_modules_card_createClass(HaMfaModulesCard,[{key:"connectedCallback",value:function(){ha_mfa_modules_card_get(HaMfaModulesCard.prototype.__proto__||Object.getPrototypeOf(HaMfaModulesCard.prototype),"connectedCallback",this).call(this);if(!registeredDialog){registeredDialog=!0;this.fire("register-dialog",{dialogShowEvent:"show-mfa-module-setup-flow",dialogTag:"ha-mfa-module-setup-flow",dialogImport:function(){return __webpack_require__.e(57).then(__webpack_require__.bind(null,651))}})}}},{key:"_enable",value:function(ev){var _this2=this;this.fire("show-mfa-module-setup-flow",{hass:this.hass,mfaModuleId:ev.model.module.id,dialogClosedCallback:function(){return _this2._refreshCurrentUser()}})}},{key:"_disable",value:function(ev){var _this3=this;if(!confirm("Are you sure you want to disable "+ev.model.module.name+"?"))return;var mfaModuleId=ev.model.module.id;this.hass.callWS({type:"auth/depose_mfa",mfa_module_id:mfaModuleId}).then(function(){_this3._refreshCurrentUser()})}},{key:"_refreshCurrentUser",value:function(){this.fire("hass-refresh-current-user")}}],[{key:"template",get:function(){return Object(html_tag.a)(ha_mfa_modules_card_templateObject)}},{key:"properties",get:function(){return{hass:Object,_loading:{type:Boolean,value:!1},_statusMsg:String,_errorMsg:String,mfaModules:Array}}}]);return HaMfaModulesCard}(Object(events_mixin.a)(Object(localize_mixin.a)(polymer_element.a)));customElements.define("ha-mfa-modules-card",ha_mfa_modules_card_HaMfaModulesCard);var paper_icon_button=__webpack_require__(62),paper_tooltip=__webpack_require__(257),format_date_time=__webpack_require__(77),ha_settings_row_createClass=function(){function defineProperties(target,props){for(var i=0,descriptor;i<props.length;i++){descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1;descriptor.configurable=!0;if("value"in descriptor)descriptor.writable=!0;Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){if(protoProps)defineProperties(Constructor.prototype,protoProps);if(staticProps)defineProperties(Constructor,staticProps);return Constructor}}(),ha_settings_row_templateObject=function(strings,raw){return Object.freeze(Object.defineProperties(strings,{raw:{value:Object.freeze(raw)}}))}(["\n    <style>\n      :host {\n        display: flex;\n        padding: 0 16px;\n        align-content: normal;\n        align-self: auto;\n        align-items: center;\n      }\n      :host([narrow]) {\n        align-items: normal;\n        flex-direction: column;\n        border-top: 1px solid var(--divider-color);\n        padding-bottom: 8px;\n      }\n      paper-item-body {\n        padding-right: 16px;\n      }\n    </style>\n    <paper-item-body two-line$='[[!threeLine]]' three-line$='[[threeLine]]'>\n      <slot name=\"heading\"></slot>\n      <div secondary><slot name=\"description\"></slot></div>\n    </paper-item-body>\n    <slot></slot>\n    "],["\n    <style>\n      :host {\n        display: flex;\n        padding: 0 16px;\n        align-content: normal;\n        align-self: auto;\n        align-items: center;\n      }\n      :host([narrow]) {\n        align-items: normal;\n        flex-direction: column;\n        border-top: 1px solid var(--divider-color);\n        padding-bottom: 8px;\n      }\n      paper-item-body {\n        padding-right: 16px;\n      }\n    </style>\n    <paper-item-body two-line$='[[!threeLine]]' three-line$='[[threeLine]]'>\n      <slot name=\"heading\"></slot>\n      <div secondary><slot name=\"description\"></slot></div>\n    </paper-item-body>\n    <slot></slot>\n    "]);function ha_settings_row_classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function ha_settings_row_possibleConstructorReturn(self,call){if(!self){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return call&&("object"===typeof call||"function"===typeof call)?call:self}function ha_settings_row_inherits(subClass,superClass){if("function"!==typeof superClass&&null!==superClass){throw new TypeError("Super expression must either be null or a function, not "+typeof superClass)}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:!1,writable:!0,configurable:!0}});if(superClass)Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass}var ha_settings_row_HaSettingsRow=function(_PolymerElement){ha_settings_row_inherits(HaSettingsRow,_PolymerElement);function HaSettingsRow(){ha_settings_row_classCallCheck(this,HaSettingsRow);return ha_settings_row_possibleConstructorReturn(this,(HaSettingsRow.__proto__||Object.getPrototypeOf(HaSettingsRow)).apply(this,arguments))}ha_settings_row_createClass(HaSettingsRow,null,[{key:"template",get:function(){return Object(html_tag.a)(ha_settings_row_templateObject)}},{key:"properties",get:function(){return{narrow:{type:Boolean,reflectToAttribute:!0},threeLine:{type:Boolean,value:!1}}}}]);return HaSettingsRow}(polymer_element.a);customElements.define("ha-settings-row",ha_settings_row_HaSettingsRow);var ha_refresh_tokens_card_createClass=function(){function defineProperties(target,props){for(var i=0,descriptor;i<props.length;i++){descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1;descriptor.configurable=!0;if("value"in descriptor)descriptor.writable=!0;Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){if(protoProps)defineProperties(Constructor.prototype,protoProps);if(staticProps)defineProperties(Constructor,staticProps);return Constructor}}(),ha_refresh_tokens_card_templateObject=function(strings,raw){return Object.freeze(Object.defineProperties(strings,{raw:{value:Object.freeze(raw)}}))}(["\n    <style>\n      paper-card {\n        display: block;\n      }\n      paper-icon-button {\n        color: var(--primary-text-color);\n      }\n      paper-icon-button[disabled] {\n        color: var(--disabled-text-color);\n      }\n    </style>\n    <paper-card heading=\"[[localize('ui.panel.profile.refresh_tokens.header')]]\">\n      <div class=\"card-content\">[[localize('ui.panel.profile.refresh_tokens.description')]]</div>\n      <template is='dom-repeat' items='[[_computeTokens(refreshTokens)]]'>\n        <ha-settings-row three-line>\n          <span slot='heading'>[[_formatTitle(item.client_id)]]</span>\n          <div slot='description'>[[_formatCreatedAt(item.created_at)]]</div>\n          <div slot='description'>[[_formatLastUsed(item)]]</div>\n          <div>\n            <template is='dom-if' if='[[item.is_current]]'>\n              <paper-tooltip\n                position=\"left\"\n              >[[localize('ui.panel.profile.refresh_tokens.current_token_tooltip')]]</paper-tooltip>\n            </template>\n            <paper-icon-button\n              icon=\"hass:delete\"\n              on-click='_handleDelete'\n              disabled=\"[[item.is_current]]\"\n            ></paper-icon-button>\n          </div>\n        </ha-settings-row>\n      </template>\n    </paper-card>\n    "],["\n    <style>\n      paper-card {\n        display: block;\n      }\n      paper-icon-button {\n        color: var(--primary-text-color);\n      }\n      paper-icon-button[disabled] {\n        color: var(--disabled-text-color);\n      }\n    </style>\n    <paper-card heading=\"[[localize('ui.panel.profile.refresh_tokens.header')]]\">\n      <div class=\"card-content\">[[localize('ui.panel.profile.refresh_tokens.description')]]</div>\n      <template is='dom-repeat' items='[[_computeTokens(refreshTokens)]]'>\n        <ha-settings-row three-line>\n          <span slot='heading'>[[_formatTitle(item.client_id)]]</span>\n          <div slot='description'>[[_formatCreatedAt(item.created_at)]]</div>\n          <div slot='description'>[[_formatLastUsed(item)]]</div>\n          <div>\n            <template is='dom-if' if='[[item.is_current]]'>\n              <paper-tooltip\n                position=\"left\"\n              >[[localize('ui.panel.profile.refresh_tokens.current_token_tooltip')]]</paper-tooltip>\n            </template>\n            <paper-icon-button\n              icon=\"hass:delete\"\n              on-click='_handleDelete'\n              disabled=\"[[item.is_current]]\"\n            ></paper-icon-button>\n          </div>\n        </ha-settings-row>\n      </template>\n    </paper-card>\n    "]);function ha_refresh_tokens_card_asyncToGenerator(fn){return function(){var gen=fn.apply(this,arguments);return new Promise(function(resolve,reject){function step(key,arg){try{var info=gen[key](arg),value=info.value}catch(error){reject(error);return}if(info.done){resolve(value)}else{return Promise.resolve(value).then(function(value){step("next",value)},function(err){step("throw",err)})}}return step("next")})}}function ha_refresh_tokens_card_classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function ha_refresh_tokens_card_possibleConstructorReturn(self,call){if(!self){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return call&&("object"===typeof call||"function"===typeof call)?call:self}function ha_refresh_tokens_card_inherits(subClass,superClass){if("function"!==typeof superClass&&null!==superClass){throw new TypeError("Super expression must either be null or a function, not "+typeof superClass)}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:!1,writable:!0,configurable:!0}});if(superClass)Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass}var ha_refresh_tokens_card_HaRefreshTokens=function(_LocalizeMixin){ha_refresh_tokens_card_inherits(HaRefreshTokens,_LocalizeMixin);function HaRefreshTokens(){ha_refresh_tokens_card_classCallCheck(this,HaRefreshTokens);return ha_refresh_tokens_card_possibleConstructorReturn(this,(HaRefreshTokens.__proto__||Object.getPrototypeOf(HaRefreshTokens)).apply(this,arguments))}ha_refresh_tokens_card_createClass(HaRefreshTokens,[{key:"_computeTokens",value:function(refreshTokens){return refreshTokens.filter(function(tkn){return"normal"===tkn.type}).reverse()}},{key:"_formatTitle",value:function(clientId){return this.localize("ui.panel.profile.refresh_tokens.token_title","clientId",clientId)}},{key:"_formatCreatedAt",value:function(created){return this.localize("ui.panel.profile.refresh_tokens.created_at","date",Object(format_date_time.a)(new Date(created)))}},{key:"_formatLastUsed",value:function(item){return item.last_used_at?this.localize("ui.panel.profile.refresh_tokens.last_used","date",Object(format_date_time.a)(new Date(item.last_used_at)),"location",item.last_used_ip):this.localize("ui.panel.profile.refresh_tokens.not_used")}},{key:"_handleDelete",value:function(){var _ref=ha_refresh_tokens_card_asyncToGenerator(regeneratorRuntime.mark(function _callee(ev){return regeneratorRuntime.wrap(function(_context){while(1){switch(_context.prev=_context.next){case 0:if(confirm(this.localize("ui.panel.profile.refresh_tokens.confirm_delete","name",ev.model.item.client_id))){_context.next=2;break}return _context.abrupt("return");case 2:_context.prev=2;_context.next=5;return this.hass.callWS({type:"auth/delete_refresh_token",refresh_token_id:ev.model.item.id});case 5:this.fire("hass-refresh-tokens");_context.next=12;break;case 8:_context.prev=8;_context.t0=_context["catch"](2);console.error(_context.t0);alert(this.localize("ui.panel.profile.refresh_tokens.delete_failed"));case 12:case"end":return _context.stop();}}},_callee,this,[[2,8]])}));return function(){return _ref.apply(this,arguments)}}()}],[{key:"template",get:function(){return Object(html_tag.a)(ha_refresh_tokens_card_templateObject)}},{key:"properties",get:function(){return{hass:Object,refreshTokens:Array}}}]);return HaRefreshTokens}(Object(localize_mixin.a)(Object(events_mixin.a)(polymer_element.a)));customElements.define("ha-refresh-tokens-card",ha_refresh_tokens_card_HaRefreshTokens);var ha_long_lived_access_tokens_card_createClass=function(){function defineProperties(target,props){for(var i=0,descriptor;i<props.length;i++){descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1;descriptor.configurable=!0;if("value"in descriptor)descriptor.writable=!0;Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){if(protoProps)defineProperties(Constructor.prototype,protoProps);if(staticProps)defineProperties(Constructor,staticProps);return Constructor}}(),ha_long_lived_access_tokens_card_templateObject=function(strings,raw){return Object.freeze(Object.defineProperties(strings,{raw:{value:Object.freeze(raw)}}))}(["\n    <style include=\"ha-style\">\n      paper-card {\n        display: block;\n      }\n      .card-content {\n        margin: -1em 0;\n      }\n      a {\n        color: var(--primary-color);\n      }\n      paper-icon-button {\n        color: var(--primary-text-color);\n      }\n    </style>\n    <paper-card heading=\"[[localize('ui.panel.profile.long_lived_access_tokens.header')]]\">\n      <div class=\"card-content\">\n        <p>\n          [[localize('ui.panel.profile.long_lived_access_tokens.description')]]\n          <a href='https://developers.home-assistant.io/docs/en/auth_api.html#making-authenticated-requests' target='_blank'>\n            [[localize('ui.panel.profile.long_lived_access_tokens.learn_auth_requests')]]\n          </a>\n        </p>\n        <template is='dom-if' if='[[!_tokens.length]]'>\n          <p>[[localize('ui.panel.profile.long_lived_access_tokens.empty_state')]]</p>\n        </template>\n      </div>\n      <template is='dom-repeat' items='[[_tokens]]'>\n        <ha-settings-row three-line>\n          <span slot='heading'>[[item.client_name]]</span>\n          <div slot='description'>[[_formatCreatedAt(item.created_at)]]</div>\n          <div slot='description'>[[_formatLastUsed(item)]]</div>\n          <paper-icon-button icon=\"hass:delete\" on-click='_handleDelete'></paper-icon-button>\n        </ha-settings-row>\n      </template>\n      <div class='card-actions'>\n        <paper-button on-click='_handleCreate'>\n          [[localize('ui.panel.profile.long_lived_access_tokens.create')]]\n        </paper-button>\n      </div>\n    </paper-card>\n    "],["\n    <style include=\"ha-style\">\n      paper-card {\n        display: block;\n      }\n      .card-content {\n        margin: -1em 0;\n      }\n      a {\n        color: var(--primary-color);\n      }\n      paper-icon-button {\n        color: var(--primary-text-color);\n      }\n    </style>\n    <paper-card heading=\"[[localize('ui.panel.profile.long_lived_access_tokens.header')]]\">\n      <div class=\"card-content\">\n        <p>\n          [[localize('ui.panel.profile.long_lived_access_tokens.description')]]\n          <a href='https://developers.home-assistant.io/docs/en/auth_api.html#making-authenticated-requests' target='_blank'>\n            [[localize('ui.panel.profile.long_lived_access_tokens.learn_auth_requests')]]\n          </a>\n        </p>\n        <template is='dom-if' if='[[!_tokens.length]]'>\n          <p>[[localize('ui.panel.profile.long_lived_access_tokens.empty_state')]]</p>\n        </template>\n      </div>\n      <template is='dom-repeat' items='[[_tokens]]'>\n        <ha-settings-row three-line>\n          <span slot='heading'>[[item.client_name]]</span>\n          <div slot='description'>[[_formatCreatedAt(item.created_at)]]</div>\n          <div slot='description'>[[_formatLastUsed(item)]]</div>\n          <paper-icon-button icon=\"hass:delete\" on-click='_handleDelete'></paper-icon-button>\n        </ha-settings-row>\n      </template>\n      <div class='card-actions'>\n        <paper-button on-click='_handleCreate'>\n          [[localize('ui.panel.profile.long_lived_access_tokens.create')]]\n        </paper-button>\n      </div>\n    </paper-card>\n    "]);function ha_long_lived_access_tokens_card_asyncToGenerator(fn){return function(){var gen=fn.apply(this,arguments);return new Promise(function(resolve,reject){function step(key,arg){try{var info=gen[key](arg),value=info.value}catch(error){reject(error);return}if(info.done){resolve(value)}else{return Promise.resolve(value).then(function(value){step("next",value)},function(err){step("throw",err)})}}return step("next")})}}function ha_long_lived_access_tokens_card_classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function ha_long_lived_access_tokens_card_possibleConstructorReturn(self,call){if(!self){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return call&&("object"===typeof call||"function"===typeof call)?call:self}function ha_long_lived_access_tokens_card_inherits(subClass,superClass){if("function"!==typeof superClass&&null!==superClass){throw new TypeError("Super expression must either be null or a function, not "+typeof superClass)}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:!1,writable:!0,configurable:!0}});if(superClass)Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass}var ha_long_lived_access_tokens_card_HaLongLivedTokens=function(_LocalizeMixin){ha_long_lived_access_tokens_card_inherits(HaLongLivedTokens,_LocalizeMixin);function HaLongLivedTokens(){ha_long_lived_access_tokens_card_classCallCheck(this,HaLongLivedTokens);return ha_long_lived_access_tokens_card_possibleConstructorReturn(this,(HaLongLivedTokens.__proto__||Object.getPrototypeOf(HaLongLivedTokens)).apply(this,arguments))}ha_long_lived_access_tokens_card_createClass(HaLongLivedTokens,[{key:"_computeTokens",value:function(refreshTokens){return refreshTokens.filter(function(tkn){return"long_lived_access_token"===tkn.type}).reverse()}},{key:"_formatTitle",value:function(name){return this.localize("ui.panel.profile.long_lived_access_tokens.token_title","name",name)}},{key:"_formatCreatedAt",value:function(created){return this.localize("ui.panel.profile.long_lived_access_tokens.created_at","date",Object(format_date_time.a)(new Date(created)))}},{key:"_formatLastUsed",value:function(item){return item.last_used_at?this.localize("ui.panel.profile.refresh_tokens.last_used","date",Object(format_date_time.a)(new Date(item.last_used_at)),"location",item.last_used_ip):this.localize("ui.panel.profile.refresh_tokens.not_used")}},{key:"_handleCreate",value:function(){var _ref=ha_long_lived_access_tokens_card_asyncToGenerator(regeneratorRuntime.mark(function _callee(){var name,token;return regeneratorRuntime.wrap(function(_context){while(1){switch(_context.prev=_context.next){case 0:name=prompt(this.localize("ui.panel.profile.long_lived_access_tokens.prompt_name"));if(name){_context.next=3;break}return _context.abrupt("return");case 3:_context.prev=3;_context.next=6;return this.hass.callWS({type:"auth/long_lived_access_token",lifespan:3650,client_name:name});case 6:token=_context.sent;prompt(this.localize("ui.panel.profile.long_lived_access_tokens.prompt_copy_token"),token);this.fire("hass-refresh-tokens");_context.next=15;break;case 11:_context.prev=11;_context.t0=_context["catch"](3);console.error(_context.t0);alert(this.localize("ui.panel.profile.long_lived_access_tokens.create_failed"));case 15:case"end":return _context.stop();}}},_callee,this,[[3,11]])}));return function(){return _ref.apply(this,arguments)}}()},{key:"_handleDelete",value:function(){var _ref2=ha_long_lived_access_tokens_card_asyncToGenerator(regeneratorRuntime.mark(function _callee2(ev){return regeneratorRuntime.wrap(function(_context2){while(1){switch(_context2.prev=_context2.next){case 0:if(confirm(this.localize("ui.panel.profile.long_lived_access_tokens.confirm_delete","name",ev.model.item.client_name))){_context2.next=2;break}return _context2.abrupt("return");case 2:_context2.prev=2;_context2.next=5;return this.hass.callWS({type:"auth/delete_refresh_token",refresh_token_id:ev.model.item.id});case 5:this.fire("hass-refresh-tokens");_context2.next=12;break;case 8:_context2.prev=8;_context2.t0=_context2["catch"](2);console.error(_context2.t0);alert(this.localize("ui.panel.profile.long_lived_access_tokens.delete_failed"));case 12:case"end":return _context2.stop();}}},_callee2,this,[[2,8]])}));return function(){return _ref2.apply(this,arguments)}}()}],[{key:"template",get:function(){return Object(html_tag.a)(ha_long_lived_access_tokens_card_templateObject)}},{key:"properties",get:function(){return{hass:Object,refreshTokens:Array,_tokens:{type:Array,computed:"_computeTokens(refreshTokens)"}}}}]);return HaLongLivedTokens}(Object(localize_mixin.a)(Object(events_mixin.a)(polymer_element.a)));customElements.define("ha-long-lived-access-tokens-card",ha_long_lived_access_tokens_card_HaLongLivedTokens);var paper_dropdown_menu=__webpack_require__(124),paper_listbox=__webpack_require__(123),ha_pick_language_row_createClass=function(){function defineProperties(target,props){for(var i=0,descriptor;i<props.length;i++){descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1;descriptor.configurable=!0;if("value"in descriptor)descriptor.writable=!0;Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){if(protoProps)defineProperties(Constructor.prototype,protoProps);if(staticProps)defineProperties(Constructor,staticProps);return Constructor}}(),ha_pick_language_row_templateObject=function(strings,raw){return Object.freeze(Object.defineProperties(strings,{raw:{value:Object.freeze(raw)}}))}(["\n    <style>\n      a { color: var(--primary-color); }\n    </style>\n    <ha-settings-row narrow='[[narrow]]'>\n      <span slot='heading'>[[localize('ui.panel.profile.language.header')]]</span>\n      <span slot='description'>\n        <a\n          href='https://developers.home-assistant.io/docs/en/internationalization_translation.html'\n          target='_blank'>[[localize('ui.panel.profile.language.link_promo')]]</a>\n      </span>\n      <paper-dropdown-menu label=\"[[localize('ui.panel.profile.language.dropdown_label')]]\" dynamic-align=\"\">\n        <paper-listbox slot=\"dropdown-content\" attr-for-selected=\"language-tag\" selected=\"{{languageSelection}}\">\n          <template is=\"dom-repeat\" items=\"[[languages]]\">\n            <paper-item language-tag$=\"[[item.tag]]\">[[item.nativeName]]</paper-item>\n          </template>\n        </paper-listbox>\n      </paper-dropdown-menu>\n    </ha-settings-row>\n    "],["\n    <style>\n      a { color: var(--primary-color); }\n    </style>\n    <ha-settings-row narrow='[[narrow]]'>\n      <span slot='heading'>[[localize('ui.panel.profile.language.header')]]</span>\n      <span slot='description'>\n        <a\n          href='https://developers.home-assistant.io/docs/en/internationalization_translation.html'\n          target='_blank'>[[localize('ui.panel.profile.language.link_promo')]]</a>\n      </span>\n      <paper-dropdown-menu label=\"[[localize('ui.panel.profile.language.dropdown_label')]]\" dynamic-align=\"\">\n        <paper-listbox slot=\"dropdown-content\" attr-for-selected=\"language-tag\" selected=\"{{languageSelection}}\">\n          <template is=\"dom-repeat\" items=\"[[languages]]\">\n            <paper-item language-tag$=\"[[item.tag]]\">[[item.nativeName]]</paper-item>\n          </template>\n        </paper-listbox>\n      </paper-dropdown-menu>\n    </ha-settings-row>\n    "]);function ha_pick_language_row_classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function ha_pick_language_row_possibleConstructorReturn(self,call){if(!self){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return call&&("object"===typeof call||"function"===typeof call)?call:self}function ha_pick_language_row_inherits(subClass,superClass){if("function"!==typeof superClass&&null!==superClass){throw new TypeError("Super expression must either be null or a function, not "+typeof superClass)}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:!1,writable:!0,configurable:!0}});if(superClass)Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass}var ha_pick_language_row_HaPickLanguageRow=function(_LocalizeMixin){ha_pick_language_row_inherits(HaPickLanguageRow,_LocalizeMixin);function HaPickLanguageRow(){ha_pick_language_row_classCallCheck(this,HaPickLanguageRow);return ha_pick_language_row_possibleConstructorReturn(this,(HaPickLanguageRow.__proto__||Object.getPrototypeOf(HaPickLanguageRow)).apply(this,arguments))}ha_pick_language_row_createClass(HaPickLanguageRow,[{key:"computeLanguages",value:function(hass){if(!hass||!hass.translationMetadata){return[]}return Object.keys(hass.translationMetadata.translations).map(function(key){return{tag:key,nativeName:hass.translationMetadata.translations[key].nativeName}})}},{key:"setLanguageSelection",value:function(language){this.languageSelection=language}},{key:"languageSelectionChanged",value:function(newVal){if(newVal!==this.language){this.fire("hass-language-select",{language:newVal})}}}],[{key:"template",get:function(){return Object(html_tag.a)(ha_pick_language_row_templateObject)}},{key:"properties",get:function(){return{hass:Object,narrow:Boolean,languageSelection:{type:String,observer:"languageSelectionChanged"},languages:{type:Array,computed:"computeLanguages(hass)"}}}},{key:"observers",get:function(){return["setLanguageSelection(language)"]}}]);return HaPickLanguageRow}(Object(localize_mixin.a)(Object(events_mixin.a)(polymer_element.a)));customElements.define("ha-pick-language-row",ha_pick_language_row_HaPickLanguageRow);var ha_pick_theme_row_createClass=function(){function defineProperties(target,props){for(var i=0,descriptor;i<props.length;i++){descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1;descriptor.configurable=!0;if("value"in descriptor)descriptor.writable=!0;Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){if(protoProps)defineProperties(Constructor.prototype,protoProps);if(staticProps)defineProperties(Constructor,staticProps);return Constructor}}(),ha_pick_theme_row_get=function get(object,property,receiver){if(null===object)object=Function.prototype;var desc=Object.getOwnPropertyDescriptor(object,property);if(desc===void 0){var parent=Object.getPrototypeOf(object);if(null===parent){}else{return get(parent,property,receiver)}}else if("value"in desc){return desc.value}else{var getter=desc.get;if(getter===void 0){return}return getter.call(receiver)}},ha_pick_theme_row_templateObject=function(strings,raw){return Object.freeze(Object.defineProperties(strings,{raw:{value:Object.freeze(raw)}}))}(["\n    <style>\n      a { color: var(--primary-color); }\n    </style>\n    <ha-settings-row narrow='[[narrow]]'>\n      <span slot='heading'>[[localize('ui.panel.profile.themes.header')]]</span>\n      <span slot='description'>\n        <template is='dom-if' if='[[!_hasThemes]]'>\n        [[localize('ui.panel.profile.themes.error_no_theme')]]\n        </template>\n        <a\n          href='https://www.home-assistant.io/components/frontend/#defining-themes'\n          target='_blank'>[[localize('ui.panel.profile.themes.link_promo')]]</a>\n      </span>\n      <paper-dropdown-menu\n        label=\"[[localize('ui.panel.profile.themes.dropdown_label')]]\"\n        dynamic-align\n        disabled='[[!_hasThemes]]'\n      >\n        <paper-listbox slot=\"dropdown-content\" selected=\"{{selectedTheme}}\">\n          <template is=\"dom-repeat\" items=\"[[themes]]\" as=\"theme\">\n            <paper-item>[[theme]]</paper-item>\n          </template>\n        </paper-listbox>\n      </paper-dropdown-menu>\n    </ha-settings-row>\n    "],["\n    <style>\n      a { color: var(--primary-color); }\n    </style>\n    <ha-settings-row narrow='[[narrow]]'>\n      <span slot='heading'>[[localize('ui.panel.profile.themes.header')]]</span>\n      <span slot='description'>\n        <template is='dom-if' if='[[!_hasThemes]]'>\n        [[localize('ui.panel.profile.themes.error_no_theme')]]\n        </template>\n        <a\n          href='https://www.home-assistant.io/components/frontend/#defining-themes'\n          target='_blank'>[[localize('ui.panel.profile.themes.link_promo')]]</a>\n      </span>\n      <paper-dropdown-menu\n        label=\"[[localize('ui.panel.profile.themes.dropdown_label')]]\"\n        dynamic-align\n        disabled='[[!_hasThemes]]'\n      >\n        <paper-listbox slot=\"dropdown-content\" selected=\"{{selectedTheme}}\">\n          <template is=\"dom-repeat\" items=\"[[themes]]\" as=\"theme\">\n            <paper-item>[[theme]]</paper-item>\n          </template>\n        </paper-listbox>\n      </paper-dropdown-menu>\n    </ha-settings-row>\n    "]);function ha_pick_theme_row_classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function ha_pick_theme_row_possibleConstructorReturn(self,call){if(!self){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return call&&("object"===typeof call||"function"===typeof call)?call:self}function ha_pick_theme_row_inherits(subClass,superClass){if("function"!==typeof superClass&&null!==superClass){throw new TypeError("Super expression must either be null or a function, not "+typeof superClass)}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:!1,writable:!0,configurable:!0}});if(superClass)Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass}var ha_pick_theme_row_HaPickThemeRow=function(_LocalizeMixin){ha_pick_theme_row_inherits(HaPickThemeRow,_LocalizeMixin);function HaPickThemeRow(){ha_pick_theme_row_classCallCheck(this,HaPickThemeRow);return ha_pick_theme_row_possibleConstructorReturn(this,(HaPickThemeRow.__proto__||Object.getPrototypeOf(HaPickThemeRow)).apply(this,arguments))}ha_pick_theme_row_createClass(HaPickThemeRow,[{key:"_compHasThemes",value:function(hass){return hass.themes&&hass.themes.themes&&Object.keys(hass.themes.themes).length}},{key:"ready",value:function(){ha_pick_theme_row_get(HaPickThemeRow.prototype.__proto__||Object.getPrototypeOf(HaPickThemeRow.prototype),"ready",this).call(this);if(this.hass.selectedTheme&&0<this.themes.indexOf(this.hass.selectedTheme)){this.selectedTheme=this.themes.indexOf(this.hass.selectedTheme)}else if(!this.hass.selectedTheme){this.selectedTheme=0}}},{key:"_computeThemes",value:function(hass){if(!hass)return[];return["Backend-selected","default"].concat(Object.keys(hass.themes.themes).sort())}},{key:"selectionChanged",value:function(hass,selection){if(0<selection&&selection<this.themes.length){if(hass.selectedTheme!==this.themes[selection]){this.fire("settheme",this.themes[selection])}}else if(0===selection&&""!==hass.selectedTheme){this.fire("settheme","")}}}],[{key:"template",get:function(){return Object(html_tag.a)(ha_pick_theme_row_templateObject)}},{key:"properties",get:function(){return{hass:Object,narrow:Boolean,_hasThemes:{type:Boolean,computed:"_compHasThemes(hass)"},themes:{type:Array,computed:"_computeThemes(hass)"},selectedTheme:{type:Number}}}},{key:"observers",get:function(){return["selectionChanged(hass, selectedTheme)"]}}]);return HaPickThemeRow}(Object(localize_mixin.a)(Object(events_mixin.a)(polymer_element.a)));customElements.define("ha-pick-theme-row",ha_pick_theme_row_HaPickThemeRow);var iron_flex_layout_classes=__webpack_require__(31),iron_label=__webpack_require__(443),is_component_loaded=__webpack_require__(136),paper_toggle_button=__webpack_require__(159),ha_push_notifications_toggle_createClass=function(){function defineProperties(target,props){for(var i=0,descriptor;i<props.length;i++){descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1;descriptor.configurable=!0;if("value"in descriptor)descriptor.writable=!0;Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){if(protoProps)defineProperties(Constructor.prototype,protoProps);if(staticProps)defineProperties(Constructor,staticProps);return Constructor}}(),ha_push_notifications_toggle_get=function get(object,property,receiver){if(null===object)object=Function.prototype;var desc=Object.getOwnPropertyDescriptor(object,property);if(desc===void 0){var parent=Object.getPrototypeOf(object);if(null===parent){}else{return get(parent,property,receiver)}}else if("value"in desc){return desc.value}else{var getter=desc.get;if(getter===void 0){return}return getter.call(receiver)}},ha_push_notifications_toggle_templateObject=function(strings,raw){return Object.freeze(Object.defineProperties(strings,{raw:{value:Object.freeze(raw)}}))}(["\n    <paper-toggle-button\n      disabled=\"[[_compDisabled(disabled, loading)]]\"\n      checked=\"{{pushChecked}}\"\n    ></paper-toggle-button>\n"],["\n    <paper-toggle-button\n      disabled=\"[[_compDisabled(disabled, loading)]]\"\n      checked=\"{{pushChecked}}\"\n    ></paper-toggle-button>\n"]);function ha_push_notifications_toggle_asyncToGenerator(fn){return function(){var gen=fn.apply(this,arguments);return new Promise(function(resolve,reject){function step(key,arg){try{var info=gen[key](arg),value=info.value}catch(error){reject(error);return}if(info.done){resolve(value)}else{return Promise.resolve(value).then(function(value){step("next",value)},function(err){step("throw",err)})}}return step("next")})}}function ha_push_notifications_toggle_classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function ha_push_notifications_toggle_possibleConstructorReturn(self,call){if(!self){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return call&&("object"===typeof call||"function"===typeof call)?call:self}function ha_push_notifications_toggle_inherits(subClass,superClass){if("function"!==typeof superClass&&null!==superClass){throw new TypeError("Super expression must either be null or a function, not "+typeof superClass)}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:!1,writable:!0,configurable:!0}});if(superClass)Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass}var pushSupported="serviceWorker"in navigator&&"PushManager"in window&&("https:"===document.location.protocol||"localhost"===document.location.hostname||"127.0.0.1"===document.location.hostname),ha_push_notifications_toggle_HaPushNotificationsToggle=function(_EventsMixin){ha_push_notifications_toggle_inherits(HaPushNotificationsToggle,_EventsMixin);function HaPushNotificationsToggle(){ha_push_notifications_toggle_classCallCheck(this,HaPushNotificationsToggle);return ha_push_notifications_toggle_possibleConstructorReturn(this,(HaPushNotificationsToggle.__proto__||Object.getPrototypeOf(HaPushNotificationsToggle)).apply(this,arguments))}ha_push_notifications_toggle_createClass(HaPushNotificationsToggle,[{key:"connectedCallback",value:function(){var _ref=ha_push_notifications_toggle_asyncToGenerator(regeneratorRuntime.mark(function _callee(){var _this2=this,reg;return regeneratorRuntime.wrap(function(_context){while(1){switch(_context.prev=_context.next){case 0:ha_push_notifications_toggle_get(HaPushNotificationsToggle.prototype.__proto__||Object.getPrototypeOf(HaPushNotificationsToggle.prototype),"connectedCallback",this).call(this);if(pushSupported){_context.next=3;break}return _context.abrupt("return");case 3:_context.prev=3;_context.next=6;return navigator.serviceWorker.ready;case 6:reg=_context.sent;if(reg.pushManager){_context.next=9;break}return _context.abrupt("return");case 9:reg.pushManager.getSubscription().then(function(subscription){_this2.loading=!1;_this2.pushChecked=!!subscription});_context.next=14;break;case 12:_context.prev=12;_context.t0=_context["catch"](3);case 14:case"end":return _context.stop();}}},_callee,this,[[3,12]])}));return function(){return _ref.apply(this,arguments)}}()},{key:"handlePushChange",value:function(pushChecked){if(!pushSupported)return;if(pushChecked){this.subscribePushNotifications()}else{this.unsubscribePushNotifications()}}},{key:"subscribePushNotifications",value:function(){var _ref2=ha_push_notifications_toggle_asyncToGenerator(regeneratorRuntime.mark(function _callee2(){var reg,sub,browserName,message;return regeneratorRuntime.wrap(function(_context2){while(1){switch(_context2.prev=_context2.next){case 0:_context2.next=2;return navigator.serviceWorker.ready;case 2:reg=_context2.sent;_context2.prev=3;_context2.next=6;return reg.pushManager.subscribe({userVisibleOnly:!0});case 6:sub=_context2.sent;browserName=void 0;if(-1<navigator.userAgent.toLowerCase().indexOf("firefox")){browserName="firefox"}else{browserName="chrome"}_context2.next=11;return this.hass.callApi("POST","notify.html5",{subscription:sub,browser:browserName});case 11:_context2.next=19;break;case 13:_context2.prev=13;_context2.t0=_context2["catch"](3);message=_context2.t0.message||"Notification registration failed.";console.error(_context2.t0);this.fire("hass-notification",{message:message});this.pushChecked=!1;case 19:case"end":return _context2.stop();}}},_callee2,this,[[3,13]])}));return function(){return _ref2.apply(this,arguments)}}()},{key:"unsubscribePushNotifications",value:function(){var _ref3=ha_push_notifications_toggle_asyncToGenerator(regeneratorRuntime.mark(function _callee3(){var reg,sub,message;return regeneratorRuntime.wrap(function(_context3){while(1){switch(_context3.prev=_context3.next){case 0:_context3.next=2;return navigator.serviceWorker.ready;case 2:reg=_context3.sent;_context3.prev=3;_context3.next=6;return reg.pushManager.getSubscription();case 6:sub=_context3.sent;if(sub){_context3.next=9;break}return _context3.abrupt("return");case 9:_context3.next=11;return this.hass.callApi("DELETE","notify.html5",{subscription:sub});case 11:_context3.next=13;return sub.unsubscribe();case 13:_context3.next=21;break;case 15:_context3.prev=15;_context3.t0=_context3["catch"](3);message=_context3.t0.message||"Failed unsubscribing for push notifications.";console.error("Error in unsub push",_context3.t0);this.fire("hass-notification",{message:message});this.pushChecked=!0;case 21:case"end":return _context3.stop();}}},_callee3,this,[[3,15]])}));return function(){return _ref3.apply(this,arguments)}}()},{key:"_compDisabled",value:function(disabled,loading){return disabled||loading}}],[{key:"template",get:function(){return Object(html_tag.a)(ha_push_notifications_toggle_templateObject)}},{key:"properties",get:function(){return{hass:{type:Object,value:null},disabled:{type:Boolean,value:!1},pushChecked:{type:Boolean,value:"Notification"in window&&"granted"===Notification.permission,observer:"handlePushChange"},loading:{type:Boolean,value:!0}}}}]);return HaPushNotificationsToggle}(Object(events_mixin.a)(polymer_element.a));customElements.define("ha-push-notifications-toggle",ha_push_notifications_toggle_HaPushNotificationsToggle);var ha_push_notifications_row_createClass=function(){function defineProperties(target,props){for(var i=0,descriptor;i<props.length;i++){descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1;descriptor.configurable=!0;if("value"in descriptor)descriptor.writable=!0;Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){if(protoProps)defineProperties(Constructor.prototype,protoProps);if(staticProps)defineProperties(Constructor,staticProps);return Constructor}}(),ha_push_notifications_row_templateObject=function(strings,raw){return Object.freeze(Object.defineProperties(strings,{raw:{value:Object.freeze(raw)}}))}(["\n    <style>\n      a { color: var(--primary-color); }\n    </style>\n    <ha-settings-row narrow='[[narrow]]'>\n      <span slot='heading'>[[localize('ui.panel.profile.push_notifications.header')]]</span>\n      <span\n        slot='description'\n      >\n        [[_description(_platformLoaded, _pushSupported)]]\n        <a\n          href='https://www.home-assistant.io/components/notify.html5/'\n          target='_blank'>[[localize('ui.panel.profile.push_notifications.link_promo')]]</a>\n      </span>\n      <ha-push-notifications-toggle\n        hass=\"[[hass]]\"\n        disabled='[[_error]]'\n      ></ha-push-notifications-toggle>\n    </ha-settings-row>\n    "],["\n    <style>\n      a { color: var(--primary-color); }\n    </style>\n    <ha-settings-row narrow='[[narrow]]'>\n      <span slot='heading'>[[localize('ui.panel.profile.push_notifications.header')]]</span>\n      <span\n        slot='description'\n      >\n        [[_description(_platformLoaded, _pushSupported)]]\n        <a\n          href='https://www.home-assistant.io/components/notify.html5/'\n          target='_blank'>[[localize('ui.panel.profile.push_notifications.link_promo')]]</a>\n      </span>\n      <ha-push-notifications-toggle\n        hass=\"[[hass]]\"\n        disabled='[[_error]]'\n      ></ha-push-notifications-toggle>\n    </ha-settings-row>\n    "]);function ha_push_notifications_row_classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function ha_push_notifications_row_possibleConstructorReturn(self,call){if(!self){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return call&&("object"===typeof call||"function"===typeof call)?call:self}function ha_push_notifications_row_inherits(subClass,superClass){if("function"!==typeof superClass&&null!==superClass){throw new TypeError("Super expression must either be null or a function, not "+typeof superClass)}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:!1,writable:!0,configurable:!0}});if(superClass)Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass}var ha_push_notifications_row_HaPushNotificationsRow=function(_LocalizeMixin){ha_push_notifications_row_inherits(HaPushNotificationsRow,_LocalizeMixin);function HaPushNotificationsRow(){ha_push_notifications_row_classCallCheck(this,HaPushNotificationsRow);return ha_push_notifications_row_possibleConstructorReturn(this,(HaPushNotificationsRow.__proto__||Object.getPrototypeOf(HaPushNotificationsRow)).apply(this,arguments))}ha_push_notifications_row_createClass(HaPushNotificationsRow,[{key:"_compPlatformLoaded",value:function(hass){return Object(is_component_loaded.a)(hass,"notify.html5")}},{key:"_compError",value:function(platformLoaded,pushSupported_){return!platformLoaded||!pushSupported_}},{key:"_description",value:function(platformLoaded,pushSupported_){var key;if(!pushSupported_){key="error_use_https"}else if(!platformLoaded){key="error_load_platform"}else{key="description"}return this.localize("ui.panel.profile.push_notifications."+key)}}],[{key:"template",get:function(){return Object(html_tag.a)(ha_push_notifications_row_templateObject)}},{key:"properties",get:function(){return{hass:Object,narrow:Boolean,_platformLoaded:{type:Boolean,computed:"_compPlatformLoaded(hass)"},_pushSupported:{type:Boolean,value:pushSupported},_error:{type:Boolean,computed:"_compError(_platformLoaded, _pushSupported)"}}}}]);return HaPushNotificationsRow}(Object(localize_mixin.a)(polymer_element.a));customElements.define("ha-push-notifications-row",ha_push_notifications_row_HaPushNotificationsRow);var ha_panel_profile_createClass=function(){function defineProperties(target,props){for(var i=0,descriptor;i<props.length;i++){descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1;descriptor.configurable=!0;if("value"in descriptor)descriptor.writable=!0;Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){if(protoProps)defineProperties(Constructor.prototype,protoProps);if(staticProps)defineProperties(Constructor,staticProps);return Constructor}}(),ha_panel_profile_get=function get(object,property,receiver){if(null===object)object=Function.prototype;var desc=Object.getOwnPropertyDescriptor(object,property);if(desc===void 0){var parent=Object.getPrototypeOf(object);if(null===parent){}else{return get(parent,property,receiver)}}else if("value"in desc){return desc.value}else{var getter=desc.get;if(getter===void 0){return}return getter.call(receiver)}},ha_panel_profile_templateObject=function(strings,raw){return Object.freeze(Object.defineProperties(strings,{raw:{value:Object.freeze(raw)}}))}(["\n    <style include=\"ha-style\">\n      :host {\n        -ms-user-select: initial;\n        -webkit-user-select: initial;\n        -moz-user-select: initial;\n      }\n\n      .content {\n        display: block;\n        max-width: 600px;\n        margin: 0 auto;\n      }\n\n      .content > * {\n        display: block;\n        margin: 24px 0;\n      }\n    </style>\n\n    <app-header-layout has-scrolling-region>\n      <app-header slot=\"header\" fixed>\n        <app-toolbar>\n          <ha-menu-button narrow='[[narrow]]' show-menu='[[showMenu]]'></ha-menu-button>\n          <div main-title>Profile</div>\n        </app-toolbar>\n      </app-header>\n\n      <div class='content'>\n        <paper-card heading='[[hass.user.name]]'>\n          <div class='card-content'>\n            You are currently logged in as [[hass.user.name]].\n            <template is='dom-if' if='[[hass.user.is_owner]]'>You are an owner.</template>\n          </div>\n\n          <ha-pick-language-row\n            narrow=\"[[narrow]]\"\n            hass=\"[[hass]]\"\n          ></ha-pick-language-row>\n          <ha-pick-theme-row\n            narrow=\"[[narrow]]\"\n            hass=\"[[hass]]\"\n          ></ha-pick-theme-row>\n          <ha-push-notifications-row\n            narrow=\"[[narrow]]\"\n            hass=\"[[hass]]\"\n          ></ha-push-notifications-row>\n\n          <div class='card-actions'>\n            <paper-button\n              class='warning'\n              on-click='_handleLogOut'\n            >Log out</paper-button>\n          </div>\n        </paper-card>\n\n        <template is=\"dom-if\" if=\"[[_canChangePassword(hass.user)]]\">\n          <ha-change-password-card hass=\"[[hass]]\"></ha-change-password-card>\n        </template>\n\n        <ha-mfa-modules-card\n          hass='[[hass]]'\n          mfa-modules='[[hass.user.mfa_modules]]'\n        ></ha-mfa-modules-card>\n\n        <ha-refresh-tokens-card\n          hass='[[hass]]'\n          refresh-tokens='[[_refreshTokens]]'\n          on-hass-refresh-tokens='_refreshRefreshTokens'\n        ></ha-refresh-tokens-card>\n\n        <ha-long-lived-access-tokens-card\n          hass='[[hass]]'\n          refresh-tokens='[[_refreshTokens]]'\n          on-hass-refresh-tokens='_refreshRefreshTokens'\n        ></ha-long-lived-access-tokens-card>\n      </div>\n    </app-header-layout>\n    "],["\n    <style include=\"ha-style\">\n      :host {\n        -ms-user-select: initial;\n        -webkit-user-select: initial;\n        -moz-user-select: initial;\n      }\n\n      .content {\n        display: block;\n        max-width: 600px;\n        margin: 0 auto;\n      }\n\n      .content > * {\n        display: block;\n        margin: 24px 0;\n      }\n    </style>\n\n    <app-header-layout has-scrolling-region>\n      <app-header slot=\"header\" fixed>\n        <app-toolbar>\n          <ha-menu-button narrow='[[narrow]]' show-menu='[[showMenu]]'></ha-menu-button>\n          <div main-title>Profile</div>\n        </app-toolbar>\n      </app-header>\n\n      <div class='content'>\n        <paper-card heading='[[hass.user.name]]'>\n          <div class='card-content'>\n            You are currently logged in as [[hass.user.name]].\n            <template is='dom-if' if='[[hass.user.is_owner]]'>You are an owner.</template>\n          </div>\n\n          <ha-pick-language-row\n            narrow=\"[[narrow]]\"\n            hass=\"[[hass]]\"\n          ></ha-pick-language-row>\n          <ha-pick-theme-row\n            narrow=\"[[narrow]]\"\n            hass=\"[[hass]]\"\n          ></ha-pick-theme-row>\n          <ha-push-notifications-row\n            narrow=\"[[narrow]]\"\n            hass=\"[[hass]]\"\n          ></ha-push-notifications-row>\n\n          <div class='card-actions'>\n            <paper-button\n              class='warning'\n              on-click='_handleLogOut'\n            >Log out</paper-button>\n          </div>\n        </paper-card>\n\n        <template is=\"dom-if\" if=\"[[_canChangePassword(hass.user)]]\">\n          <ha-change-password-card hass=\"[[hass]]\"></ha-change-password-card>\n        </template>\n\n        <ha-mfa-modules-card\n          hass='[[hass]]'\n          mfa-modules='[[hass.user.mfa_modules]]'\n        ></ha-mfa-modules-card>\n\n        <ha-refresh-tokens-card\n          hass='[[hass]]'\n          refresh-tokens='[[_refreshTokens]]'\n          on-hass-refresh-tokens='_refreshRefreshTokens'\n        ></ha-refresh-tokens-card>\n\n        <ha-long-lived-access-tokens-card\n          hass='[[hass]]'\n          refresh-tokens='[[_refreshTokens]]'\n          on-hass-refresh-tokens='_refreshRefreshTokens'\n        ></ha-long-lived-access-tokens-card>\n      </div>\n    </app-header-layout>\n    "]);function ha_panel_profile_asyncToGenerator(fn){return function(){var gen=fn.apply(this,arguments);return new Promise(function(resolve,reject){function step(key,arg){try{var info=gen[key](arg),value=info.value}catch(error){reject(error);return}if(info.done){resolve(value)}else{return Promise.resolve(value).then(function(value){step("next",value)},function(err){step("throw",err)})}}return step("next")})}}function ha_panel_profile_classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function ha_panel_profile_possibleConstructorReturn(self,call){if(!self){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return call&&("object"===typeof call||"function"===typeof call)?call:self}function ha_panel_profile_inherits(subClass,superClass){if("function"!==typeof superClass&&null!==superClass){throw new TypeError("Super expression must either be null or a function, not "+typeof superClass)}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:!1,writable:!0,configurable:!0}});if(superClass)Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass}var ha_panel_profile_HaPanelProfile=function(_EventsMixin){ha_panel_profile_inherits(HaPanelProfile,_EventsMixin);function HaPanelProfile(){ha_panel_profile_classCallCheck(this,HaPanelProfile);return ha_panel_profile_possibleConstructorReturn(this,(HaPanelProfile.__proto__||Object.getPrototypeOf(HaPanelProfile)).apply(this,arguments))}ha_panel_profile_createClass(HaPanelProfile,[{key:"connectedCallback",value:function(){ha_panel_profile_get(HaPanelProfile.prototype.__proto__||Object.getPrototypeOf(HaPanelProfile.prototype),"connectedCallback",this).call(this);this._refreshRefreshTokens()}},{key:"_refreshRefreshTokens",value:function(){var _ref=ha_panel_profile_asyncToGenerator(regeneratorRuntime.mark(function _callee(){return regeneratorRuntime.wrap(function(_context){while(1){switch(_context.prev=_context.next){case 0:_context.next=2;return this.hass.callWS({type:"auth/refresh_tokens"});case 2:this._refreshTokens=_context.sent;case 3:case"end":return _context.stop();}}},_callee,this)}));return function(){return _ref.apply(this,arguments)}}()},{key:"_handleLogOut",value:function(){this.fire("hass-logout")}},{key:"_canChangePassword",value:function(user){return user.credentials.some(function(cred){return"homeassistant"===cred.auth_provider_type})}}],[{key:"template",get:function(){return Object(html_tag.a)(ha_panel_profile_templateObject)}},{key:"properties",get:function(){return{hass:Object,narrow:Boolean,showMenu:Boolean,_refreshTokens:Array}}}]);return HaPanelProfile}(Object(events_mixin.a)(polymer_element.a));customElements.define("ha-panel-profile",ha_panel_profile_HaPanelProfile)}}]);
//# sourceMappingURL=dbcf9ae8276873d541f0.chunk.js.map